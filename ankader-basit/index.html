<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANKADER - Yönetim Sistemi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@latest/dist/jspdf.plugin.autotable.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            line-height: 1.6;
        }

        /* Ana Renkler */
        :root {
            --ankader-orange: #ff7f00;
            --ankader-dark: #e66b00;
            --ankader-light: #ff9933;
            --white: #ffffff;
            --gray: #6c757d;
            --light-gray: #f8f9fa;
            --dark-text: #2c3e50;
            --border: #dee2e6;
        }

        /* Login Ekranı */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--ankader-orange) 0%, var(--ankader-light) 100%);
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: var(--ankader-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.3);
            background-image: url('assets/ankader-logo.png');
            background-size: 75%;
            background-repeat: no-repeat;
            background-position: center;
            position: relative;
            overflow: hidden;
            background-color: white;
        }

        .logo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: logoShine 3s ease-in-out infinite;
        }

        @keyframes logoShine {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .login-title {
            color: var(--ankader-orange);
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .login-subtitle {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-text);
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--ankader-orange);
            box-shadow: 0 0 0 3px rgba(255, 127, 0, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, var(--ankader-orange) 0%, var(--ankader-light) 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 127, 0, 0.3);
        }

        .login-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            font-size: 12px;
            color: var(--gray);
        }

        .motto {
            color: var(--ankader-orange);
            font-weight: 600;
            font-style: italic;
            margin-top: 10px;
        }

        /* Ana Uygulama */
        .app {
            display: none;
            min-height: 100vh;
        }

        .navbar {
            background: linear-gradient(135deg, var(--ankader-orange) 0%, var(--ankader-light) 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 24px;
            font-weight: bold;
        }

        .navbar-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .main-content {
            display: flex;
            min-height: calc(100vh - 70px);
        }

        .sidebar {
            background: #2c3e50;
            width: 250px;
            color: white;
            padding: 20px 0;
        }

        .menu-item {
            display: block;
            color: #bdc3c7;
            text-decoration: none;
            padding: 15px 25px;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .menu-item:hover, .menu-item.active {
            background: #34495e;
            color: white;
            border-left-color: var(--ankader-orange);
        }

        .menu-item i {
            margin-right: 10px;
            width: 20px;
        }

        .content {
            flex: 1;
            padding: 30px;
            background: var(--light-gray);
        }

        .page-title {
            color: var(--ankader-orange);
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
        }

        /* Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-left: 4px solid var(--ankader-orange);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--ankader-orange);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--gray);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Üye Kartları */
        .members-grid {
            display: grid;
            gap: 20px;
            transition: all 0.3s ease;
        }

        .members-grid.grid-view {
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        }

        .members-grid.list-view {
            grid-template-columns: 1fr;
        }

        .members-grid.compact-view {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }

        .member-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .member-card:hover {
            transform: translateY(-5px);
        }

        .member-card.list-style {
            display: flex;
            align-items: center;
            padding: 20px;
        }

        .member-card.list-style .member-photo {
            width: 80px;
            height: 80px;
            margin-right: 20px;
            border-radius: 50%;
        }

        .member-card.list-style .member-info {
            flex: 1;
            padding: 0;
        }

        .member-photo {
            height: 200px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--gray);
        }

        .member-info {
            padding: 20px;
        }

        .member-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 10px;
        }

        .member-detail {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .member-university {
            color: var(--ankader-orange);
            font-weight: 500;
            margin-bottom: 10px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        /* Search Box */
        .search-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--ankader-orange);
        }

        .filters-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark-text);
        }

        .filter-select {
            padding: 8px 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--ankader-orange);
        }

        .view-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .view-buttons {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            padding: 8px 12px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .view-btn.active {
            background: var(--ankader-orange);
            color: white;
            border-color: var(--ankader-orange);
        }

        .filter-clear-btn {
            background: var(--gray);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .filter-clear-btn:hover {
            background: #5a6268;
        }

        /* Actions */
        .page-actions {
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        /* Etkinlik & Bütçe Kartları */
        .event-card, .budget-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .event-title {
            color: var(--dark-text);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .event-details {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .event-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }

        .status-planned {
            background: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background: #d4edda;
            color: #155724;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
            }
            
            .content {
                order: 1;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .members-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Gizle/Göster */
        .hidden {
            display: none !important;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 50px;
            color: var(--gray);
        }

        /* Modal Stilleri */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            color: var(--ankader-orange);
            font-size: 24px;
            font-weight: 600;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: var(--gray);
        }

        .close:hover {
            color: var(--dark-text);
        }

        .modal-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
    </style>
</head>
<body>
    <!-- Login Ekranı -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="logo">
                <!-- Anka simgesi burada olacak -->
            </div>
            <h1 class="login-title">ANKADER</h1>
            <p class="login-subtitle">Pendik İTO Şehit Ahmet Aslanhan Anadolu<br>İmam Hatip Lisesi Mezunları Derneği</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Ad Soyad</label>
                    <input type="text" id="loginName" class="form-input" placeholder="Ad soyadınızı girin" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Telefon</label>
                    <input type="tel" id="loginPhone" class="form-input" placeholder="Telefon numaranızı girin" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Şifre</label>
                    <div style="position: relative;">
                        <input type="password" id="loginPassword" class="form-input" placeholder="Şifrenizi girin" required style="padding-right: 50px;">
                        <button type="button" onclick="togglePassword()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: var(--gray);">
                            <i id="passwordToggleIcon" class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <button type="submit" class="btn">Giriş Yap</button>
            </form>
            
            <div class="login-footer">
                <p>Bu sistem sadece yetkili yöneticiler içindir.</p>
                <p class="motto">"Küllerinden Doğuyor"</p>
            </div>
        </div>
    </div>

    <!-- Ana Uygulama -->
    <div id="mainApp" class="app">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="navbar-brand">
                <div style="width: 35px; height: 35px; background-image: url('assets/ankader-logo.png'); background-size: 70%; background-repeat: no-repeat; background-position: center; background-color: white; border-radius: 50%; margin-right: 10px;"></div>
                ANKADER Yönetim
            </div>
            <div class="navbar-user">
                <span>Hoş geldiniz, <strong id="userName">ACAR</strong></span>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Çıkış
                </button>
            </div>
        </nav>

        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <a href="#" class="menu-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Ana Sayfa
                </a>
                <a href="#" class="menu-item" onclick="showPage('members')">
                    <i class="fas fa-users"></i> Üye Yönetimi
                </a>
                <a href="#" class="menu-item" onclick="showPage('performance')">
                    <i class="fas fa-chart-line"></i> Üye Performans
                </a>
                <a href="#" class="menu-item" onclick="showPage('events')">
                    <i class="fas fa-calendar-alt"></i> Etkinlik Takibi
                </a>
                <a href="#" class="menu-item" onclick="showPage('decisions')">
                    <i class="fas fa-bullseye"></i> Kararlar & Hedefler
                </a>
                <a href="#" class="menu-item" onclick="showPage('budget')">
                    <i class="fas fa-money-bill-wave"></i> Bütçe Yönetimi
                </a>
                <a href="#" class="menu-item" onclick="showAdminPanel()" style="display: none;" id="adminPanelMenu">
                    <i class="fas fa-user-shield"></i> Yönetici Bilgisi
                </a>
                <a href="#" class="menu-item" onclick="showPage('messaging')">
                    <i class="fas fa-paper-plane"></i> Mesaj Gönder
                </a>
                <a href="#" class="menu-item" onclick="showPage('management')">
                    <i class="fas fa-users-cog"></i> Yönetim Kadrosu
                </a>
                <div style="margin-top: 30px; padding: 20px; border-top: 1px solid #34495e; text-align: center;">
                    <div style="width: 50px; height: 50px; background-image: url('assets/ankader-logo.png'); background-size: 70%; background-repeat: no-repeat; background-position: center; background-color: white; border-radius: 50%; margin: 0 auto 15px;"></div>
                    <h4 style="color: var(--ankader-orange); margin-bottom: 10px;">ANKADER</h4>
                    <p style="font-size: 11px; color: #95a5a6; line-height: 1.4;">
                        Pendik İTO Şehit Ahmet Aslanhan Anadolu İmam Hatip Lisesi Mezunları Derneği
                    </p>
                    <p style="color: var(--ankader-orange); font-style: italic; margin-top: 10px; font-size: 12px;">
                        "Küllerinden Doğuyor"
                    </p>
                </div>
            </div>

            <!-- İçerik Alanı -->
            <div class="content">
                <!-- Dashboard -->
                <div id="dashboardPage" class="page">
                    <h1 class="page-title">Ana Sayfa</h1>
                    <p class="page-subtitle">ANKADER Yönetim Sistemi Dashboard</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalMembers">0</div>
                            <div class="stat-label">Toplam Üye</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalEvents">0</div>
                            <div class="stat-label">Toplam Etkinlik</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalBudget">0₺</div>
                            <div class="stat-label">Toplam Bütçe</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="activeMembers">0</div>
                            <div class="stat-label">Aktif Üye</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div>
                            <h3 style="margin-bottom: 20px; color: var(--dark-text);">Son Eklenen Üyeler</h3>
                            <div id="recentMembers"></div>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 20px; color: var(--dark-text);">Yaklaşan Etkinlikler</h3>
                            <div id="upcomingEvents"></div>
                        </div>
                    </div>
                </div>

                <!-- Üye Yönetimi -->
                <div id="membersPage" class="page hidden">
                    <h1 class="page-title">Üye Yönetimi</h1>
                    <p class="page-subtitle">Dernek üyelerini yönetin ve takip edin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addMember()">
                            <i class="fas fa-plus"></i> Yeni Üye Ekle
                        </button>
                        <button class="btn-secondary" onclick="importFromExcel()">
                            <i class="fas fa-file-excel"></i> Excel'den İçe Aktar
                        </button>
                        <button class="btn-secondary" onclick="exportMembers()">
                            <i class="fas fa-file-excel"></i> Excel İndir
                        </button>
                        <button class="btn-secondary" onclick="exportMembersPDF()">
                            <i class="fas fa-file-pdf"></i> PDF İndir
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Üye ara (ad, telefon, email)..." 
                               onkeyup="searchMembers(this.value)">
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Mezuniyet Yılı</label>
                                <select id="yearFilter" class="filter-select" onchange="applyFilters()">
                                    <option value="">Tüm Yıllar</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Üniversite</label>
                                <select id="universityFilter" class="filter-select" onchange="applyFilters()">
                                    <option value="">Tüm Üniversiteler</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Bölüm</label>
                                <select id="departmentFilter" class="filter-select" onchange="applyFilters()">
                                    <option value="">Tüm Bölümler</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Durum</label>
                                <select id="statusFilter" class="filter-select" onchange="applyFilters()">
                                    <option value="">Tümü</option>
                                    <option value="active">Aktif</option>
                                    <option value="inactive">Pasif</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Aidat Durumu</label>
                                <select id="duesFilter" class="filter-select" onchange="applyFilters()">
                                    <option value="">Tümü</option>
                                    <option value="paid">Ödendi</option>
                                    <option value="unpaid">Ödenmedi</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="filter-clear-btn" onclick="clearFilters()">
                            <i class="fas fa-times"></i> Filtreleri Temizle
                        </button>
                    </div>

                    <div class="view-controls">
                        <div class="view-buttons">
                            <button class="view-btn active" onclick="setViewMode('grid')">
                                <i class="fas fa-th"></i> Kart Görünümü
                            </button>
                            <button class="view-btn" onclick="setViewMode('list')">
                                <i class="fas fa-list"></i> Liste Görünümü
                            </button>
                            <button class="view-btn" onclick="setViewMode('compact')">
                                <i class="fas fa-th-large"></i> Kompakt Görünümü
                            </button>
                        </div>
                        <div style="color: var(--gray); font-size: 14px;">
                            Toplam <span id="memberCount">0</span> üye
                        </div>
                    </div>

                    <div id="membersContainer" class="members-grid grid-view"></div>
                </div>

                <!-- Üye Performans Durumu -->
                <div id="performancePage" class="page hidden">
                    <h1 class="page-title">Üye Performans Durumu</h1>
                    <p class="page-subtitle">Üyelerin aidat, bağış, etkinlik katılımı ve yorumlarını takip edin</p>
                    
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Üye ara..." 
                               onkeyup="searchPerformanceMembers(this.value)">
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Aidat Durumu</label>
                                <select id="performanceDuesFilter" class="filter-select" onchange="applyPerformanceFilters()">
                                    <option value="">Tümü</option>
                                    <option value="paid">Ödendi</option>
                                    <option value="unpaid">Ödenmedi</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Bağış Durumu</label>
                                <select id="donationFilter" class="filter-select" onchange="applyPerformanceFilters()">
                                    <option value="">Tümü</option>
                                    <option value="donor">Bağış Yapmış</option>
                                    <option value="non_donor">Bağış Yapmamış</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Etkinlik Katılımı</label>
                                <select id="eventParticipationFilter" class="filter-select" onchange="applyPerformanceFilters()">
                                    <option value="">Tümü</option>
                                    <option value="active_participant">Aktif Katılımcı</option>
                                    <option value="low_participant">Az Katılım</option>
                                    <option value="no_participant">Katılım Yok</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="filter-clear-btn" onclick="clearPerformanceFilters()">
                            <i class="fas fa-times"></i> Filtreleri Temizle
                        </button>
                    </div>

                    <div id="performanceContainer"></div>
                </div>

                <!-- Etkinlik Takibi -->
                <div id="eventsPage" class="page hidden">
                    <h1 class="page-title">Etkinlik Takibi</h1>
                    <p class="page-subtitle">Dernek etkinliklerini yönetin ve takip edin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addEvent()">
                            <i class="fas fa-plus"></i> Yeni Etkinlik
                        </button>
                        <button class="btn-secondary" onclick="exportEvents()">
                            <i class="fas fa-file-excel"></i> Excel İndir
                        </button>
                        <button class="btn-secondary" onclick="exportEventsPDF()">
                            <i class="fas fa-file-pdf"></i> PDF İndir
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Etkinlik ara..." 
                               onkeyup="searchEvents(this.value)">
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Başlangıç Tarihi</label>
                                <input type="date" id="startDateFilter" class="filter-select" onchange="applyEventFilters()">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Bitiş Tarihi</label>
                                <input type="date" id="endDateFilter" class="filter-select" onchange="applyEventFilters()">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Durum</label>
                                <select id="eventStatusFilter" class="filter-select" onchange="applyEventFilters()">
                                    <option value="">Tüm Durumlar</option>
                                    <option value="planned">Planlanıyor</option>
                                    <option value="confirmed">Onaylandı</option>
                                    <option value="completed">Tamamlandı</option>
                                    <option value="cancelled">İptal Edildi</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="filter-clear-btn" onclick="clearEventFilters()">
                            <i class="fas fa-times"></i> Filtreleri Temizle
                        </button>
                    </div>

                    <div id="eventsContainer"></div>
                </div>

                <!-- Kararlar & Hedefler -->
                <div id="decisionsPage" class="page hidden">
                    <h1 class="page-title">Etkinlik Kararları ve Hedefler</h1>
                    <p class="page-subtitle">Dernek kararlarını ve hedeflerini yönetin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addDecision()">
                            <i class="fas fa-plus"></i> Yeni Karar/Hedef
                        </button>
                        <button class="btn-secondary" onclick="exportDecisions()">
                            <i class="fas fa-download"></i> Rapor İndir
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Karar/Hedef ara..." 
                               onkeyup="searchDecisions(this.value)">
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">Tür</label>
                                <select id="decisionTypeFilter" class="filter-select" onchange="applyDecisionFilters()">
                                    <option value="">Tümü</option>
                                    <option value="decision">Karar</option>
                                    <option value="goal">Hedef</option>
                                    <option value="task">Görev</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Durum</label>
                                <select id="decisionStatusFilter" class="filter-select" onchange="applyDecisionFilters()">
                                    <option value="">Tüm Durumlar</option>
                                    <option value="pending">Beklemede</option>
                                    <option value="in_progress">Devam Ediyor</option>
                                    <option value="completed">Tamamlandı</option>
                                    <option value="cancelled">İptal Edildi</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Öncelik</label>
                                <select id="decisionPriorityFilter" class="filter-select" onchange="applyDecisionFilters()">
                                    <option value="">Tüm Öncelikler</option>
                                    <option value="high">Yüksek</option>
                                    <option value="medium">Orta</option>
                                    <option value="low">Düşük</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="filter-clear-btn" onclick="clearDecisionFilters()">
                            <i class="fas fa-times"></i> Filtreleri Temizle
                        </button>
                    </div>

                    <div id="decisionsContainer"></div>
                </div>

                <!-- Bütçe Yönetimi -->
                <div id="budgetPage" class="page hidden">
                    <h1 class="page-title">Bütçe Yönetimi</h1>
                    <p class="page-subtitle">Dernek gelir ve giderlerini takip edin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addTransaction()">
                            <i class="fas fa-plus"></i> Yeni İşlem
                        </button>
                        <button class="btn-secondary" onclick="showStatistics()">
                            <i class="fas fa-chart-bar"></i> İstatistik Durum
                        </button>
                        <button class="btn-secondary" onclick="exportBudget()">
                            <i class="fas fa-file-excel"></i> Excel İndir
                        </button>
                        <button class="btn-secondary" onclick="exportBudgetPDF()">
                            <i class="fas fa-file-pdf"></i> PDF İndir
                        </button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="budgetIncome">0₺</div>
                            <div class="stat-label">Toplam Gelir</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="budgetExpense">0₺</div>
                            <div class="stat-label">Toplam Gider</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="budgetBalance">0₺</div>
                            <div class="stat-label">Kalan Bakiye</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="transactionCount">0</div>
                            <div class="stat-label">Toplam İşlem</div>
                        </div>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="İşlem ara..." 
                               onkeyup="searchTransactions(this.value)">
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label">İşlem Türü</label>
                                <select id="typeFilter" class="filter-select" onchange="applyBudgetFilters()">
                                    <option value="">Tümü</option>
                                    <option value="income">Gelir</option>
                                    <option value="expense">Gider</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Kategori</label>
                                <select id="categoryFilter" class="filter-select" onchange="applyBudgetFilters()">
                                    <option value="">Tüm Kategoriler</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Başlangıç Tarihi</label>
                                <input type="date" id="budgetStartDate" class="filter-select" onchange="applyBudgetFilters()">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">Bitiş Tarihi</label>
                                <input type="date" id="budgetEndDate" class="filter-select" onchange="applyBudgetFilters()">
                            </div>
                        </div>
                        
                        <button class="filter-clear-btn" onclick="clearBudgetFilters()">
                            <i class="fas fa-times"></i> Filtreleri Temizle
                        </button>
                    </div>

                    <div id="budgetContainer"></div>
                </div>

                <!-- Yönetici Paneli -->
                <div id="adminPanelPage" class="page hidden">
                    <h1 class="page-title">Yönetici Paneli</h1>
                    <p class="page-subtitle">Alt yöneticileri yönetin ve erişim izinlerini düzenleyin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addAdmin()">
                            <i class="fas fa-plus"></i> Yeni Yönetici Ekle
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Yönetici ara..." 
                               onkeyup="searchAdmins(this.value)">
                    </div>

                    <div id="adminContainer">
                        <!-- Yönetici listesi buraya gelecek -->
                    </div>
                </div>

                <!-- Mesaj Gönder -->
                <div id="messagingPage" class="page hidden">
                    <h1 class="page-title">Mesaj Gönder</h1>
                    <p class="page-subtitle">Üyelere toplu WhatsApp veya SMS mesajı gönderin</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i> Mesaj Gönder
                        </button>
                        <button class="btn-secondary" onclick="clearMessageForm()">
                            <i class="fas fa-eraser"></i> Temizle
                        </button>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                        <!-- Sol taraf - Mesaj Formu -->
                        <div>
                            <div class="budget-card">
                                <h3 style="color: var(--ankader-orange); margin-bottom: 20px;">
                                    <i class="fas fa-edit"></i> Mesaj Detayları
                                </h3>
                                
                                <div class="form-group">
                                    <label class="form-label">Mesaj Türü *</label>
                                    <select id="messageType" class="form-input" required>
                                        <option value="">Seçiniz</option>
                                        <option value="whatsapp">WhatsApp</option>
                                        <option value="sms">SMS</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Mesaj İçeriği *</label>
                                    <textarea id="messageContent" class="form-input" rows="6" 
                                              placeholder="Mesaj içeriğinizi buraya yazın..." required></textarea>
                                    <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                                        <span id="charCount">0</span>/500 karakter
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Gönderim Zamanı</label>
                                    <select id="sendTime" class="form-input">
                                        <option value="now">Hemen Gönder</option>
                                        <option value="scheduled">Zamanla Gönder</option>
                                    </select>
                                </div>
                                
                                <div class="form-group" id="scheduledTimeGroup" style="display: none;">
                                    <label class="form-label">Gönderim Tarihi ve Saati</label>
                                    <input type="datetime-local" id="scheduledDateTime" class="form-input">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sağ taraf - Alıcı Seçimi -->
                        <div>
                            <div class="budget-card">
                                <h3 style="color: var(--ankader-orange); margin-bottom: 20px;">
                                    <i class="fas fa-users"></i> Alıcı Seçimi
                                </h3>
                                
                                <div class="form-group">
                                    <label class="form-label">Gönderim Türü</label>
                                    <select id="recipientType" class="form-input" onchange="updateRecipientOptions()">
                                        <option value="all">Tüm Üyeler</option>
                                        <option value="filtered">Filtreli Gönderim</option>
                                        <option value="selected">Seçili Üyeler</option>
                                    </select>
                                </div>
                                
                                <div id="filterOptions" style="display: none;">
                                    <div class="form-group">
                                        <label class="form-label">Mezuniyet Yılı</label>
                                        <select id="messageGradYearFilter" class="form-input">
                                            <option value="">Tüm Yıllar</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Bölüm</label>
                                        <select id="messageDepartmentFilter" class="form-input">
                                            <option value="">Tüm Bölümler</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Aidat Durumu</label>
                                        <select id="messageDuesFilter" class="form-input">
                                            <option value="">Tümü</option>
                                            <option value="paid">Ödendi</option>
                                            <option value="unpaid">Ödenmedi</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="selectedMembers" style="display: none;">
                                    <div class="form-group">
                                        <label class="form-label">Üye Seçimi</label>
                                        <div style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 6px;">
                                            <div id="memberCheckboxList">
                                                <!-- Üye checkbox listesi buraya gelecek -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-top: 15px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-weight: 600;">Toplam Alıcı:</span>
                                        <span id="recipientCount" style="color: var(--ankader-orange); font-weight: 600;">0</span>
                                    </div>
                                    <div style="font-size: 12px; color: var(--gray); margin-top: 5px;" id="recipientDetails"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Yönetim Kadrosu -->
                <div id="managementPage" class="page hidden">
                    <h1 class="page-title">Yönetim Kadrosu</h1>
                    <p class="page-subtitle">Dernek yönetim kadrosu ve görev tanımları</p>
                    
                    <div class="page-actions">
                        <button class="btn" onclick="addManagementMember()">
                            <i class="fas fa-plus"></i> Yeni Kadro Ekle
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Kadro ara..." 
                               onkeyup="searchManagement(this.value)">
                    </div>

                    <div id="managementContainer">
                        <!-- Yönetim kadrosu listesi buraya gelecek -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Etkinlik Ekleme/Düzenleme Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="eventModalTitle">Yeni Etkinlik Ekle</h3>
                <span class="close" onclick="closeEventModal()">&times;</span>
            </div>
            
            <form id="eventForm">
                <div class="form-group">
                    <label class="form-label">Etkinlik Başlığı *</label>
                    <input type="text" id="eventTitle" class="form-input" required>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Tarih *</label>
                        <input type="date" id="eventDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Saat *</label>
                        <input type="time" id="eventTime" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Konum *</label>
                    <input type="text" id="eventLocation" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Açıklama *</label>
                    <textarea id="eventDescription" class="form-input" rows="3" required></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Durum</label>
                        <select id="eventStatus" class="form-input">
                            <option value="planned">Planlanıyor</option>
                            <option value="confirmed">Onaylandı</option>
                            <option value="completed">Tamamlandı</option>
                            <option value="cancelled">İptal Edildi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Maksimum Katılımcı</label>
                        <input type="number" id="eventMaxParticipants" class="form-input" min="1" placeholder="Sınır yok">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notlar</label>
                    <textarea id="eventNotes" class="form-input" rows="2"></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeEventModal()">İptal</button>
                <button type="button" class="btn" onclick="saveEvent()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Üye Performans Modal -->
    <div id="performanceModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="performanceModalTitle">Üye Performans Detayı</h3>
                <span class="close" onclick="closePerformanceModal()">&times;</span>
            </div>
            
            <div id="performanceModalContent">
                <!-- Dinamik içerik buraya gelecek -->
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closePerformanceModal()">Kapat</button>
                <button type="button" class="btn" onclick="addComment()">Yorum Ekle</button>
            </div>
        </div>
    </div>

    <!-- İstatistik Modal -->
    <div id="statisticsModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 1000px;">
            <div class="modal-header">
                <h3 class="modal-title">Bütçe İstatistikleri</h3>
                <span class="close" onclick="closeStatisticsModal()">&times;</span>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label class="form-label">Başlangıç Tarihi</label>
                        <input type="date" id="statsStartDate" class="form-input" onchange="updateStatistics()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Bitiş Tarihi</label>
                        <input type="date" id="statsEndDate" class="form-input" onchange="updateStatistics()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kategori</label>
                        <select id="statsCategory" class="form-input" onchange="updateStatistics()">
                            <option value="">Tüm Kategoriler</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: end;">
                        <button type="button" class="btn-secondary" onclick="clearStatisticsFilters()">Filtreleri Temizle</button>
                    </div>
                </div>
            </div>
            
            <div id="statisticsContent">
                <!-- İstatistik içeriği buraya gelecek -->
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeStatisticsModal()">Kapat</button>
                <button type="button" class="btn" onclick="exportStatistics()">İstatistik İndir</button>
            </div>
        </div>
    </div>

    <!-- Yorum Ekleme Modal -->
    <div id="commentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Yeni Yorum Ekle</h3>
                <span class="close" onclick="closeCommentModal()">&times;</span>
            </div>
            
            <form id="commentForm">
                <div class="form-group">
                    <label class="form-label">Yorum *</label>
                    <textarea id="commentText" class="form-input" rows="4" required placeholder="Üye hakkında yorumunuzu yazın..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Kategori</label>
                    <select id="commentCategory" class="form-input">
                        <option value="general">Genel</option>
                        <option value="payment">Ödeme</option>
                        <option value="event">Etkinlik</option>
                        <option value="behavior">Davranış</option>
                        <option value="contribution">Katkı</option>
                    </select>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeCommentModal()">İptal</button>
                <button type="button" class="btn" onclick="saveComment()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Karar/Hedef Modal -->
    <div id="decisionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="decisionModalTitle">Yeni Karar/Hedef Ekle</h3>
                <span class="close" onclick="closeDecisionModal()">&times;</span>
            </div>
            
            <form id="decisionForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Tür *</label>
                        <select id="decisionType" class="form-input" required>
                            <option value="">Seçiniz</option>
                            <option value="decision">Karar</option>
                            <option value="goal">Hedef</option>
                            <option value="task">Görev</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="filter-label">Öncelik</label>
                        <select id="decisionPriority" class="form-input">
                            <option value="medium">Orta</option>
                            <option value="low">Düşük</option>
                            <option value="high">Yüksek</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Başlık *</label>
                    <input type="text" id="decisionTitle" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Açıklama *</label>
                    <textarea id="decisionDescription" class="form-input" rows="4" required></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Karar Tarihi</label>
                        <input type="date" id="decisionDate" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Hedef Tarih</label>
                        <input type="date" id="decisionTargetDate" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Durum</label>
                        <select id="decisionStatus" class="form-input">
                            <option value="pending">Beklemede</option>
                            <option value="in_progress">Devam Ediyor</option>
                            <option value="completed">Tamamlandı</option>
                            <option value="cancelled">İptal Edildi</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Sorumlu Kişi/Kişiler</label>
                    <input type="text" id="decisionResponsible" class="form-input" placeholder="Sorumlu kişi adları">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ek Notlar</label>
                    <textarea id="decisionNotes" class="form-input" rows="2"></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeDecisionModal()">İptal</button>
                <button type="button" class="btn" onclick="saveDecision()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Yönetici Ekleme Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="adminModalTitle">Yeni Yönetici Ekle</h3>
                <span class="close" onclick="closeAdminModal()">&times;</span>
            </div>
            
            <form id="adminForm">
                <div class="form-group">
                    <label class="form-label">Üye Seçin *</label>
                    <select id="adminMember" class="form-input" required>
                        <option value="">Üye seçiniz</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Yönetici Rolü *</label>
                    <select id="adminRole" class="form-input" required>
                        <option value="">Rol seçiniz</option>
                        <option value="admin">Yönetici</option>
                        <option value="moderator">Moderatör</option>
                        <option value="viewer">Görüntüleyici</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Giriş Şifresi *</label>
                    <input type="password" id="adminPassword" class="form-input" required 
                           placeholder="Yöneticinin giriş şifresi">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Şifre Tekrar *</label>
                    <input type="password" id="adminPasswordConfirm" class="form-input" required 
                           placeholder="Şifreyi tekrar girin">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Erişim İzinleri</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_members" checked>
                            <span>Üye Yönetimi</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_events" checked>
                            <span>Etkinlik Yönetimi</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_budget" checked>
                            <span>Bütçe Yönetimi</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_decisions" checked>
                            <span>Kararlar & Hedefler</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_performance" checked>
                            <span>Performans Takibi</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="perm_reports">
                            <span>Rapor İndirme</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notlar</label>
                    <textarea id="adminNotes" class="form-input" rows="3" 
                              placeholder="Bu yönetici hakkında notlar..."></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeAdminModal()">İptal</button>
                <button type="button" class="btn" onclick="saveAdmin()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Yönetim Kadrosu Modal -->
    <div id="managementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="managementModalTitle">Yeni Kadro Ekle</h3>
                <span class="close" onclick="closeManagementModal()">&times;</span>
            </div>
            
            <form id="managementForm">
                <div class="form-group">
                    <label class="form-label">Üye Seçin *</label>
                    <select id="managementMember" class="form-input" required>
                        <option value="">Üye seçiniz</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Görev Unvanı *</label>
                    <input type="text" id="managementTitle" class="form-input" required 
                           placeholder="örn: Başkan, Başkan Yardımcısı, Sekreter...">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Görev Tanımı</label>
                    <textarea id="managementDescription" class="form-input" rows="4" 
                              placeholder="Bu görevin sorumluluklarını açıklayın..."></textarea>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Görev Başlangıç Tarihi</label>
                        <input type="date" id="managementStartDate" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Görev Bitiş Tarihi</label>
                        <input type="date" id="managementEndDate" class="form-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Öncelik Sırası</label>
                    <select id="managementPriority" class="form-input">
                        <option value="1">1 - En Yüksek (Başkan)</option>
                        <option value="2">2 - Yüksek (Başkan Yardımcısı)</option>
                        <option value="3">3 - Orta (Sekreter, Muhasebeci)</option>
                        <option value="4">4 - Normal (Üye)</option>
                        <option value="5">5 - Düşük</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">İletişim Bilgileri</label>
                    <textarea id="managementContact" class="form-input" rows="3" 
                              placeholder="Özel telefon, e-posta vs. (opsiyonel)"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notlar</label>
                    <textarea id="managementNotes" class="form-input" rows="3" 
                              placeholder="Bu kadro hakkında ek notlar..."></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeManagementModal()">İptal</button>
                <button type="button" class="btn" onclick="saveManagementMember()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Bütçe İşlem Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="transactionModalTitle">Yeni İşlem Ekle</h3>
                <span class="close" onclick="closeTransactionModal()">&times;</span>
            </div>
            
            <form id="transactionForm">
                <div class="form-group">
                    <label class="form-label">İşlem Türü *</label>
                    <select id="transactionType" class="form-input" required onchange="updateCategoryOptions()">
                        <option value="">Seçiniz</option>
                        <option value="income">Gelir</option>
                        <option value="expense">Gider</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Tutar *</label>
                        <input type="number" id="transactionAmount" class="form-input" required min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tarih *</label>
                        <input type="date" id="transactionDate" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Kategori *</label>
                    <select id="transactionCategory" class="form-input" required>
                        <option value="">Önce işlem türünü seçin</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Kişi/Kurum</label>
                    <select id="transactionMember" class="form-input">
                        <option value="">Seçiniz (İsteğe bağlı)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Açıklama *</label>
                    <input type="text" id="transactionDescription" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Detaylı Not</label>
                    <textarea id="transactionNotes" class="form-input" rows="3"></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeTransactionModal()">İptal</button>
                <button type="button" class="btn" onclick="saveTransaction()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Excel Import Modal -->
    <div id="excelModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Excel'den Üye İçe Aktar</h3>
                <span class="close" onclick="closeExcelModal()">&times;</span>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p style="color: var(--gray); margin-bottom: 15px;">
                    Excel dosyanızı seçin. Dosya şu sütunları içermelidir: Ad Soyad, Telefon, Email, Mezuniyet Yılı, Üniversite, Bölüm
                </p>
                <input type="file" id="excelFile" accept=".xlsx,.xls" style="margin-bottom: 15px;">
                <button class="btn-secondary" onclick="downloadTemplate()">
                    <i class="fas fa-download"></i> Örnek Şablon İndir
                </button>
            </div>
            
            <div id="excelPreview" style="display: none;">
                <h4 style="margin-bottom: 10px;">Önizleme:</h4>
                <div id="excelPreviewContent"></div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeExcelModal()">İptal</button>
                <button type="button" class="btn" onclick="processExcelFile()">İçe Aktar</button>
            </div>
        </div>
    </div>

    <div id="memberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="memberModalTitle">Yeni Üye Ekle</h3>
                <span class="close" onclick="closeMemberModal()">&times;</span>
            </div>
            
            <form id="memberForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Ad Soyad *</label>
                        <input type="text" id="memberName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefon *</label>
                        <input type="tel" id="memberPhone" class="form-input" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email *</label>
                    <input type="email" id="memberEmail" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Profil Fotoğrafı (İsteğe Bağlı)</label>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <input type="file" id="memberPhoto" class="form-input" accept="image/*" style="flex: 1;">
                        <div id="photoPreview" style="width: 60px; height: 60px; border-radius: 50%; border: 2px solid #ddd; display: flex; align-items: center; justify-content: center; background-color: #f9f9f9; overflow: hidden;">
                            <i class="fas fa-user" style="color: #ccc; font-size: 24px;"></i>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Mezuniyet Yılı *</label>
                        <input type="number" id="memberYear" class="form-input" min="1990" max="2030" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Durum</label>
                        <select id="memberStatus" class="form-input">
                            <option value="active">Aktif</option>
                            <option value="inactive">Pasif</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Üniversite *</label>
                    <input type="text" id="memberUniversity" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Bölüm *</label>
                    <input type="text" id="memberDepartment" class="form-input" required>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Aidat Durumu</label>
                        <select id="memberDuesStatus" class="form-input">
                            <option value="paid">Ödendi</option>
                            <option value="unpaid">Ödenmedi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Son Aidat Tarihi</label>
                        <input type="date" id="memberLastDuesDate" class="form-input">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label class="form-label">Aidat Tutarı (₺)</label>
                        <input type="number" id="memberDuesAmount" class="form-input" min="0" step="1" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kalan Borç (₺)</label>
                        <input type="number" id="memberDuesDebt" class="form-input" min="0" step="1" placeholder="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notlar</label>
                    <textarea id="memberNotes" class="form-input" rows="3"></textarea>
                </div>
            </form>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeMemberModal()">İptal</button>
                <button type="button" class="btn" onclick="saveMember()">Kaydet</button>
            </div>
        </div>
    </div>

    <script>
        // Global değişkenlar
        let currentUser = null;
        let members = [];
        let events = [];
        let decisions = [];
        let budget = {};
        let transactions = [];
        let memberComments = [];
        let memberPerformance = [];
        let editingMemberId = null;
        let editingEventId = null;
        let editingDecisionId = null;
        let editingTransactionId = null;
        let selectedMemberId = null;
        let currentViewMode = 'grid';
        let filteredMembers = [];
        let filteredEvents = [];
        let filteredDecisions = [];
        let filteredPerformance = [];
        let filteredTransactions = [];
        let admins = [];
        let filteredAdmins = [];
        let editingAdminId = null;
        let managementTeam = [];
        let filteredManagement = [];
        let editingManagementId = null;

        // Sayfa yüklendiğinde
        document.addEventListener('DOMContentLoaded', function() {
            // PDF kütüphanesi kontrolü
            setTimeout(() => {
                if (typeof window.jspdf === 'undefined') {
                    console.error('jsPDF kütüphanesi yüklenemedi');
                } else {
                    console.log('jsPDF kütüphanesi başarıyla yüklendi');
                }
            }, 1000);
            
            // Fotoğraf yükleme event listener'ı
            const photoInput = document.getElementById('memberPhoto');
            if (photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    const preview = document.getElementById('photoPreview');
                    
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="Önizleme">`;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        preview.innerHTML = '<i class="fas fa-user" style="color: #ccc; font-size: 24px;"></i>';
                    }
                });
            }
            
            loadData();
        });

        // Veri yükleme
        async function loadData() {
            try {
                // Members verisi
                const membersResponse = await fetch('data/members.json');
                const membersData = await membersResponse.json();
                members = membersData.members;
                filteredMembers = [...members];

                // Events verisi
                const eventsResponse = await fetch('data/events.json');
                const eventsData = await eventsResponse.json();
                events = eventsData.events;
                filteredEvents = [...events];

                // Budget verisi
                const budgetResponse = await fetch('data/budget.json');
                const budgetData = await budgetResponse.json();
                budget = budgetData.budget;
                transactions = budgetData.transactions || [];
                filteredTransactions = [...transactions];

                // Initialize member comments and performance data
                memberComments = [
                    {
                        id: 1,
                        memberId: 1,
                        text: 'Etkinliklere düzenli katılım gösteriyor. Çok aktif bir üyemiz.',
                        category: 'general',
                        date: '2024-01-10T14:30:00.000Z',
                        author: 'Yönetim'
                    },
                    {
                        id: 2,
                        memberId: 1,
                        text: 'Aidat ödemesini zamanında gerçekleştirdi.',
                        category: 'payment',
                        date: '2024-01-15T09:15:00.000Z',
                        author: 'Muhasebe'
                    },
                    {
                        id: 3,
                        memberId: 2,
                        text: 'Yılbaşı etkinliğine ailesiyle birlikte katıldı.',
                        category: 'event',
                        date: '2024-01-05T16:45:00.000Z',
                        author: 'Etkinlik Komitesi'
                    }
                ];

                memberPerformance = [...members];
                filteredPerformance = [...memberPerformance];

                // Initialize decisions
                decisions = [
                    {
                        id: 1,
                        type: 'decision',
                        priority: 'high',
                        title: '2024 Yılı Etkinlik Programı',
                        description: '2024 yılı için mezun buluşması, iftar programı ve gezi etkinliklerinin planlanması kararlaştırıldı.',
                        status: 'completed',
                        decisionDate: '2024-01-15',
                        targetDate: '2024-12-31',
                        responsible: 'Etkinlik Komitesi',
                        notes: 'Tüm etkinlikler için bütçe ayrıldı.',
                        createdAt: '2024-01-15T10:00:00.000Z'
                    },
                    {
                        id: 2,
                        type: 'goal',
                        priority: 'medium',
                        title: 'Üye Sayısını 500\'e Çıkarma',
                        description: 'Dernek üye sayısını 2024 sonuna kadar 500 kişiye çıkarmak hedefleniyor.',
                        status: 'in_progress',
                        decisionDate: '2024-02-01',
                        targetDate: '2024-12-31',
                        responsible: 'Üyelik Komitesi',
                        notes: 'Sosyal medya kampanyaları başlatıldı.',
                        createdAt: '2024-02-01T09:00:00.000Z'
                    }
                ];
                filteredDecisions = [...decisions];

                // Initialize admin data
                admins = [
                    {
                        id: 1,
                        member: members[1], // İkinci üye örnek olarak
                        role: 'admin',
                        password: 'admin123',
                        permissions: ['members', 'events', 'budget', 'performance'],
                        notes: 'Deneme amaçlı eklenen yönetici',
                        createdAt: '2024-01-01T10:00:00.000Z',
                        lastLogin: null
                    }
                ];
                filteredAdmins = [...admins];

                updateDashboard();
                renderMembers();
                renderEvents();
                renderBudget();
                renderDecisions();
                populateFilters();
                populateBudgetFilters();
            } catch (error) {
                console.error('Veri yükleme hatası:', error);
            }
        }

        // Şifre gösterme/gizleme
        function togglePassword() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleIcon = document.getElementById('passwordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleIcon.className = 'fas fa-eye';
            }
        }

        // Login işlemi
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('loginName').value;
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;

            // Basit doğrulama
            if (name.toLowerCase() === 'acar' && phone === '05000000000' && password === 'acar2024!') {
                currentUser = { name: 'ACAR', role: 'main_admin' };
                document.getElementById('userName').textContent = name;
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                
                // Ana yönetici menüsünü göster
                document.getElementById('adminPanelMenu').style.display = 'block';
                
            } else {
                // Alt yönetici kontrolü
                const admin = admins.find(a => 
                    a.member.name.toLowerCase() === name.toLowerCase() && 
                    a.member.phone === phone && 
                    a.password === password
                );
                
                if (admin) {
                    currentUser = { 
                        name: admin.member.name, 
                        role: admin.role,
                        permissions: admin.permissions,
                        adminId: admin.id
                    };
                    document.getElementById('userName').textContent = admin.member.name;
                    document.getElementById('loginScreen').style.display = 'none';
                    document.getElementById('mainApp').style.display = 'block';
                    
                    // Ana yönetici menüsünü gizle
                    document.getElementById('adminPanelMenu').style.display = 'none';
                    
                } else {
                    alert('Geçersiz giriş bilgileri!');
                }
            }
        });

        // Çıkış işlemi
        function logout() {
            if (confirm('Çıkış yapmak istediğinizden emin misiniz?')) {
                currentUser = null;
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('mainApp').style.display = 'none';
                document.getElementById('loginForm').reset();
            }
        }

        // Sayfa gösterimi
        function showPage(pageId) {
            // Tüm sayfaları gizle
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Menü öğelerini pasif yap
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });

            // Seçilen sayfayı göster
            document.getElementById(pageId + 'Page').classList.remove('hidden');
            
            // Sayfa yüklendiğinde özel işlemler
            if (pageId === 'performance') {
                memberPerformance = [...members];
                filteredPerformance = [...memberPerformance];
                renderPerformanceMembers();
            } else if (pageId === 'adminPanel') {
                renderAdmins();
            } else if (pageId === 'messaging') {
                initializeMessaging();
            } else if (pageId === 'management') {
                renderManagement();
            } else if (pageId === 'members') {
                renderMembers();
            } else if (pageId === 'events') {
                renderEvents();
            } else if (pageId === 'budget') {
                renderTransactions();
            } else if (pageId === 'decisions') {
                renderDecisions();
            }
            
            // Aktif menü öğesini işaretle
            event.target.classList.add('active');
        }

        // Dashboard güncelleme
        function updateDashboard() {
            const totalMembers = members.length;
            const activeMembers = members.filter(m => m.status === 'active').length;
            const totalEvents = events.length;
            
            // Bütçe hesaplaması - transactions'dan hesapla
            const totalIncome = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
            const totalExpense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
            const totalBudget = totalIncome - totalExpense;

            document.getElementById('totalMembers').textContent = totalMembers;
            document.getElementById('activeMembers').textContent = activeMembers;
            document.getElementById('totalEvents').textContent = totalEvents;
            document.getElementById('totalBudget').textContent = totalBudget.toLocaleString('tr-TR') + '₺';

            // Son eklenen üyeler
            const recentMembers = members.slice(-3).reverse();
            const recentMembersHTML = recentMembers.map(member => `
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <strong>${member.name}</strong><br>
                    <small style="color: var(--gray);">${member.university} • ${member.graduationYear}</small>
                </div>
            `).join('');
            document.getElementById('recentMembers').innerHTML = recentMembersHTML;

            // Yaklaşan etkinlikler
            const upcomingEvents = events.filter(event => new Date(event.date) > new Date()).slice(0, 3);
            const upcomingEventsHTML = upcomingEvents.map(event => `
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <strong>${event.title}</strong><br>
                    <small style="color: var(--gray);">${new Date(event.date).toLocaleDateString('tr-TR')} • ${event.time}</small>
                </div>
            `).join('');
            document.getElementById('upcomingEvents').innerHTML = upcomingEventsHTML || '<p style="color: var(--gray);">Yaklaşan etkinlik bulunmuyor.</p>';
        }

        // Üye listesi render
        function renderMembers(membersToRender = null) {
            const container = document.getElementById('membersContainer');
            const membersData = membersToRender || filteredMembers;
            
            // Üye sayısını güncelle
            document.getElementById('memberCount').textContent = membersData.length;
            
            // Container sınıfını güncelle
            container.className = `members-grid ${currentViewMode}-view`;
            
            container.innerHTML = membersData.map(member => {
                const isListStyle = currentViewMode === 'list';
                const duesStatus = member.duesStatus || 'unpaid';
                const duesStatusText = getDuesStatusText(duesStatus);
                const duesStatusColor = getDuesStatusColor(duesStatus);
                
                return `
                    <div class="member-card ${isListStyle ? 'list-style' : ''}">
                        <div class="member-photo">
                            ${member.photo && member.photo !== 'assets/default-avatar.png' ? 
                                `<img src="${member.photo}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="${member.name}">` : 
                                '<i class="fas fa-user"></i>'
                            }
                        </div>
                        <div class="member-info">
                            <div class="member-name">${member.name}</div>
                            <div class="member-detail"><i class="fas fa-phone"></i> ${member.phone}</div>
                            <div class="member-detail"><i class="fas fa-envelope"></i> ${member.email}</div>
                            <div class="member-university">${member.university} • ${member.graduationYear}</div>
                            <div class="member-detail">${member.department}</div>
                            <div style="margin: 10px 0; display: flex; gap: 10px; flex-wrap: wrap;">
                                <span class="status-badge status-${member.status}">
                                    ${member.status === 'active' ? 'Aktif' : 'Pasif'}
                                </span>
                                <span class="status-badge" style="background: ${duesStatusColor}; color: white;">
                                    <i class="fas fa-money-bill"></i> ${duesStatusText}
                                </span>
                            </div>
                            ${member.duesDebt && member.duesDebt > 0 ? `
                                <div class="member-detail" style="color: #dc3545; font-weight: 600;">
                                    <i class="fas fa-exclamation-triangle"></i> Borç: ${member.duesDebt}₺
                                </div>
                            ` : ''}
                            ${member.lastDuesDate ? `
                                <div class="member-detail">
                                    <i class="fas fa-calendar"></i> Son Aidat: ${new Date(member.lastDuesDate).toLocaleDateString('tr-TR')}
                                </div>
                            ` : ''}
                            <div style="margin-top: 15px;">
                                <button class="btn-secondary" onclick="editMember(${member.id})" style="margin-right: 10px;">
                                    <i class="fas fa-edit"></i> Düzenle
                                </button>
                                <button class="btn-secondary" onclick="deleteMember(${member.id})" style="background: #dc3545;">
                                    <i class="fas fa-trash"></i> Sil
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getDuesStatusText(status) {
            const statusMap = {
                'paid': 'Ödendi',
                'unpaid': 'Ödenmedi'
            };
            return statusMap[status] || 'Bilinmiyor';
        }

        function getDuesStatusColor(status) {
            const colorMap = {
                'paid': '#28a745',
                'unpaid': '#dc3545'
            };
            return colorMap[status] || '#6c757d';
        }

        // Filtreleri doldur
        function populateFilters() {
            // Mezuniyet yılları
            const years = [...new Set(members.map(m => m.graduationYear))].sort((a, b) => b - a);
            const yearFilter = document.getElementById('yearFilter');
            yearFilter.innerHTML = '<option value="">Tüm Yıllar</option>';
            years.forEach(year => {
                yearFilter.innerHTML += `<option value="${year}">${year}</option>`;
            });

            // Üniversiteler
            const universities = [...new Set(members.map(m => m.university))].sort();
            const universityFilter = document.getElementById('universityFilter');
            universityFilter.innerHTML = '<option value="">Tüm Üniversiteler</option>';
            universities.forEach(uni => {
                universityFilter.innerHTML += `<option value="${uni}">${uni}</option>`;
            });

            // Bölümler
            const departments = [...new Set(members.map(m => m.department))].sort();
            const departmentFilter = document.getElementById('departmentFilter');
            departmentFilter.innerHTML = '<option value="">Tüm Bölümler</option>';
            departments.forEach(dept => {
                departmentFilter.innerHTML += `<option value="${dept}">${dept}</option>`;
            });
        }

        // Filtreleri uygula
        function applyFilters() {
            const yearFilter = document.getElementById('yearFilter').value;
            const universityFilter = document.getElementById('universityFilter').value;
            const departmentFilter = document.getElementById('departmentFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const duesFilter = document.getElementById('duesFilter').value;

            filteredMembers = members.filter(member => {
                const matchYear = !yearFilter || member.graduationYear.toString() === yearFilter;
                const matchUniversity = !universityFilter || member.university === universityFilter;
                const matchDepartment = !departmentFilter || member.department === departmentFilter;
                const matchStatus = !statusFilter || member.status === statusFilter;
                const matchDues = !duesFilter || (member.duesStatus || 'unpaid') === duesFilter;

                return matchYear && matchUniversity && matchDepartment && matchStatus && matchDues;
            });

            renderMembers();
        }

        // Filtreleri temizle
        function clearFilters() {
            document.getElementById('yearFilter').value = '';
            document.getElementById('universityFilter').value = '';
            document.getElementById('departmentFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('duesFilter').value = '';
            document.querySelector('.search-input').value = '';
            
            filteredMembers = [...members];
            renderMembers();
        }

        // Görünüm modunu değiştir
        function setViewMode(mode) {
            currentViewMode = mode;
            
            // Buton aktifliğini güncelle
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderMembers();
        }

        // Üye arama
        function searchMembers(query) {
            if (!query.trim()) {
                applyFilters(); // Arama boşsa filtreleri tekrar uygula
                return;
            }

            const searchResults = filteredMembers.filter(member => 
                member.name.toLowerCase().includes(query.toLowerCase()) ||
                member.phone.includes(query) ||
                member.email.toLowerCase().includes(query.toLowerCase()) ||
                member.university.toLowerCase().includes(query.toLowerCase()) ||
                member.department.toLowerCase().includes(query.toLowerCase())
            );
            
            renderMembers(searchResults);
        }

        // Üye ekleme
        function addMember() {
            editingMemberId = null;
            document.getElementById('memberModalTitle').textContent = 'Yeni Üye Ekle';
            document.getElementById('memberForm').reset();
            document.getElementById('memberModal').style.display = 'block';
        }

        // Üye düzenleme
        function editMember(id) {
            const member = members.find(m => m.id === id);
            if (member) {
                editingMemberId = id;
                document.getElementById('memberModalTitle').textContent = 'Üye Düzenle';
                document.getElementById('memberName').value = member.name;
                document.getElementById('memberPhone').value = member.phone;
                document.getElementById('memberEmail').value = member.email;
                document.getElementById('memberYear').value = member.graduationYear;
                document.getElementById('memberUniversity').value = member.university;
                document.getElementById('memberDepartment').value = member.department;
                document.getElementById('memberStatus').value = member.status;
                document.getElementById('memberDuesStatus').value = member.duesStatus || 'unpaid';
                document.getElementById('memberLastDuesDate').value = member.lastDuesDate || '';
                document.getElementById('memberDuesAmount').value = member.duesAmount || '';
                document.getElementById('memberDuesDebt').value = member.duesDebt || '';
                document.getElementById('memberNotes').value = member.notes || '';
                
                // Fotoğraf önizlemesini ayarla
                const photoPreview = document.getElementById('photoPreview');
                const photoInput = document.getElementById('memberPhoto');
                
                if (member.photo && member.photo !== 'assets/default-avatar.png') {
                    photoPreview.innerHTML = `<img src="${member.photo}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" alt="Üye Fotoğrafı">`;
                } else {
                    photoPreview.innerHTML = '<i class="fas fa-user" style="color: #ccc; font-size: 24px;"></i>';
                }
                
                // Dosya input'unu temizle
                photoInput.value = '';
                
                document.getElementById('memberModal').style.display = 'block';
            }
        }

        // Üye silme
        function deleteMember(id) {
            if (confirm('Bu üyeyi silmek istediğinizden emin misiniz?')) {
                members = members.filter(m => m.id !== id);
                filteredMembers = filteredMembers.filter(m => m.id !== id);
                renderMembers();
                updateDashboard();
                alert('Üye başarıyla silindi.');
            }
        }

        // Üye kaydetme
        function saveMember() {
            const name = document.getElementById('memberName').value;
            const phone = document.getElementById('memberPhone').value;
            const email = document.getElementById('memberEmail').value;
            const year = parseInt(document.getElementById('memberYear').value);
            const university = document.getElementById('memberUniversity').value;
            const department = document.getElementById('memberDepartment').value;
            const status = document.getElementById('memberStatus').value;
            const duesStatus = document.getElementById('memberDuesStatus').value;
            const lastDuesDate = document.getElementById('memberLastDuesDate').value;
            const duesAmount = parseFloat(document.getElementById('memberDuesAmount').value) || 0;
            const duesDebt = parseFloat(document.getElementById('memberDuesDebt').value) || 0;
            const notes = document.getElementById('memberNotes').value;
            
            // Fotoğraf verisi
            const photoInput = document.getElementById('memberPhoto');
            const photoPreview = document.getElementById('photoPreview');
            let photoData = 'assets/default-avatar.png'; // Varsayılan
            
            // Eğer fotoğraf yüklendiyse base64 olarak al
            if (photoInput.files && photoInput.files[0]) {
                const img = photoPreview.querySelector('img');
                if (img) {
                    photoData = img.src;
                }
            }

            if (!name || !phone || !email || !year || !university || !department) {
                alert('Lütfen zorunlu alanları doldurun!');
                return;
            }

            const memberData = {
                name, phone, email, 
                graduationYear: year, 
                university, department, status, notes,
                duesStatus, lastDuesDate, duesAmount, duesDebt,
                photo: photoData,
                joinDate: new Date().toISOString().split('T')[0],
                customFields: {}
            };

            if (editingMemberId) {
                // Düzenleme
                const index = members.findIndex(m => m.id === editingMemberId);
                if (index !== -1) {
                    members[index] = { ...members[index], ...memberData };
                }
            } else {
                // Yeni ekleme
                memberData.id = Math.max(...members.map(m => m.id), 0) + 1;
                members.push(memberData);
            }

            renderMembers();
            updateDashboard();
            closeMemberModal();
            alert(editingMemberId ? 'Üye başarıyla güncellendi.' : 'Yeni üye başarıyla eklendi.');
            
            // Filtreleri yeniden uygula
            applyFilters();
        }

        // Modal kapatma
        function closeMemberModal() {
            document.getElementById('memberModal').style.display = 'none';
            editingMemberId = null;
            
            // Formu temizle
            document.getElementById('memberForm').reset();
            
            // Fotoğraf önizlemesini temizle
            const photoPreview = document.getElementById('photoPreview');
            if (photoPreview) {
                photoPreview.innerHTML = '<i class="fas fa-user" style="color: #ccc; font-size: 24px;"></i>';
            }
            
            // Modal başlığını yeni üye ekleme olarak ayarla
            document.getElementById('memberModalTitle').textContent = 'Yeni Üye Ekle';
        }

        // Etkinlik listesi render
        function renderEvents(eventsToRender = null) {
            const container = document.getElementById('eventsContainer');
            const eventsData = eventsToRender || filteredEvents;
            
            container.innerHTML = eventsData.map(event => `
                <div class="event-card">
                    <div class="event-title">${event.title}</div>
                    <div class="event-details"><i class="fas fa-calendar"></i> ${new Date(event.date).toLocaleDateString('tr-TR')} - ${event.time}</div>
                    <div class="event-details"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
                    <div class="event-details"><i class="fas fa-users"></i> ${event.participants ? event.participants.length : 0} katılımcı</div>
                    <div class="event-details">${event.description}</div>
                    <span class="event-status status-${event.status}">
                        ${getEventStatusText(event.status)}
                    </span>
                    <div style="margin-top: 15px;">
                        <button class="btn-secondary" onclick="editEvent(${event.id})" style="margin-right: 10px;">
                            <i class="fas fa-edit"></i> Düzenle
                        </button>
                        <button class="btn-secondary" onclick="deleteEvent(${event.id})" style="background: #dc3545;">
                            <i class="fas fa-trash"></i> Sil
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function getEventStatusText(status) {
            const statusMap = {
                'planned': 'Planlanıyor',
                'confirmed': 'Onaylandı',
                'completed': 'Tamamlandı',
                'cancelled': 'İptal Edildi'
            };
            return statusMap[status] || status;
        }

        // Etkinlik arama
        function searchEvents(query) {
            if (!query.trim()) {
                applyEventFilters();
                return;
            }

            const searchResults = filteredEvents.filter(event => 
                event.title.toLowerCase().includes(query.toLowerCase()) ||
                event.location.toLowerCase().includes(query.toLowerCase()) ||
                event.description.toLowerCase().includes(query.toLowerCase())
            );
            
            renderEvents(searchResults);
        }

        // Etkinlik filtrelerini uygula
        function applyEventFilters() {
            const startDate = document.getElementById('startDateFilter').value;
            const endDate = document.getElementById('endDateFilter').value;
            const status = document.getElementById('eventStatusFilter').value;

            filteredEvents = events.filter(event => {
                const eventDate = new Date(event.date);
                const matchStartDate = !startDate || eventDate >= new Date(startDate);
                const matchEndDate = !endDate || eventDate <= new Date(endDate);
                const matchStatus = !status || event.status === status;

                return matchStartDate && matchEndDate && matchStatus;
            });

            renderEvents();
        }

        // Etkinlik filtrelerini temizle
        function clearEventFilters() {
            document.getElementById('startDateFilter').value = '';
            document.getElementById('endDateFilter').value = '';
            document.getElementById('eventStatusFilter').value = '';
            document.querySelector('#eventsPage .search-input').value = '';
            
            filteredEvents = [...events];
            renderEvents();
        }

        // Bütçe render
        function renderBudget(transactionsToRender = null) {
            const transactionsData = transactionsToRender || filteredTransactions;
            
            // İstatistikleri hesapla
            const totalIncome = transactionsData.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
            const totalExpense = transactionsData.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
            const balance = totalIncome - totalExpense;
            
            document.getElementById('budgetIncome').textContent = totalIncome.toLocaleString('tr-TR') + '₺';
            document.getElementById('budgetExpense').textContent = totalExpense.toLocaleString('tr-TR') + '₺';
            document.getElementById('budgetBalance').textContent = balance.toLocaleString('tr-TR') + '₺';
            document.getElementById('transactionCount').textContent = transactionsData.length;

            const container = document.getElementById('budgetContainer');
            container.innerHTML = transactionsData.map(transaction => `
                <div class="budget-card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--dark-text); margin-bottom: 5px;">${transaction.description}</div>
                            <div style="color: var(--gray); font-size: 14px; margin-bottom: 5px;">
                                ${new Date(transaction.date).toLocaleDateString('tr-TR')} • ${getCategoryText(transaction.category)}
                            </div>
                            ${transaction.notes ? `<div style="color: var(--gray); font-size: 12px; font-style: italic;">${transaction.notes}</div>` : ''}
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="font-size: 18px; font-weight: bold; color: ${transaction.type === 'income' ? '#28a745' : '#dc3545'};">
                                ${transaction.type === 'income' ? '+' : '-'}${transaction.amount.toLocaleString('tr-TR')}₺
                            </div>
                            <div style="display: flex; gap: 5px;">
                                <button class="btn-secondary" onclick="editTransaction(${transaction.id})" style="padding: 5px 10px; font-size: 12px;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-secondary" onclick="deleteTransaction(${transaction.id})" style="background: #dc3545; padding: 5px 10px; font-size: 12px;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryText(category) {
            const categoryMap = {
                'dues': 'Aidat',
                'donation': 'Bağış',
                'event_income': 'Etkinlik Kazancı',
                'office': 'Ofis Giderleri',
                'event_expense': 'Etkinlik Giderleri',
                'technology': 'Teknoloji',
                'supplies': 'Malzemeler',
                'travel': 'Seyahat',
                'marketing': 'Pazarlama',
                'other': 'Diğer',
                // Yorum kategorileri
                'general': 'Genel',
                'payment': 'Ödeme',
                'event': 'Etkinlik',
                'behavior': 'Davranış',
                'contribution': 'Katkı'
            };
            return categoryMap[category] || category;
        }

        // Placeholder fonksiyonlar
        function addEvent() {
            editingEventId = null;
            document.getElementById('eventModalTitle').textContent = 'Yeni Etkinlik Ekle';
            document.getElementById('eventForm').reset();
            document.getElementById('eventModal').style.display = 'block';
        }

        function editEvent(id) {
            const event = events.find(e => e.id === id);
            if (event) {
                editingEventId = id;
                document.getElementById('eventModalTitle').textContent = 'Etkinlik Düzenle';
                document.getElementById('eventTitle').value = event.title;
                document.getElementById('eventDate').value = event.date;
                document.getElementById('eventTime').value = event.time;
                document.getElementById('eventLocation').value = event.location;
                document.getElementById('eventDescription').value = event.description;
                document.getElementById('eventStatus').value = event.status;
                document.getElementById('eventMaxParticipants').value = event.maxParticipants || '';
                document.getElementById('eventNotes').value = event.notes || '';
                document.getElementById('eventModal').style.display = 'block';
            }
        }

        function deleteEvent(id) {
            if (confirm('Bu etkinliği silmek istediğinizden emin misiniz?')) {
                events = events.filter(e => e.id !== id);
                filteredEvents = filteredEvents.filter(e => e.id !== id);
                renderEvents();
                updateDashboard();
                alert('Etkinlik başarıyla silindi.');
            }
        }

        function saveEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const location = document.getElementById('eventLocation').value;
            const description = document.getElementById('eventDescription').value;
            const status = document.getElementById('eventStatus').value;
            const maxParticipants = document.getElementById('eventMaxParticipants').value;
            const notes = document.getElementById('eventNotes').value;

            if (!title || !date || !time || !location || !description) {
                alert('Lütfen zorunlu alanları doldurun!');
                return;
            }

            const eventData = {
                title, date, time, location, description, status, notes,
                maxParticipants: maxParticipants ? parseInt(maxParticipants) : null,
                participants: [],
                createdAt: new Date().toISOString()
            };

            if (editingEventId) {
                const index = events.findIndex(e => e.id === editingEventId);
                if (index !== -1) {
                    events[index] = { ...events[index], ...eventData };
                }
            } else {
                eventData.id = Math.max(...events.map(e => e.id), 0) + 1;
                events.push(eventData);
            }

            filteredEvents = [...events];
            renderEvents();
            updateDashboard();
            closeEventModal();
            alert(editingEventId ? 'Etkinlik başarıyla güncellendi.' : 'Yeni etkinlik başarıyla eklendi.');
        }

        function closeEventModal() {
            document.getElementById('eventModal').style.display = 'none';
            editingEventId = null;
        }

        // Excel Import Fonksiyonları
        function importFromExcel() {
            document.getElementById('excelModal').style.display = 'block';
        }

        function closeExcelModal() {
            document.getElementById('excelModal').style.display = 'none';
            document.getElementById('excelFile').value = '';
            document.getElementById('excelPreview').style.display = 'none';
        }

        function downloadTemplate() {
            const templateData = [
                ['Ad Soyad', 'Telefon', 'Email', 'Mezuniyet Yılı', 'Üniversite', 'Bölüm', 'Durum'],
                ['Örnek Üye', '05001234567', 'ornek@email.com', '2020', 'İstanbul Üniversitesi', 'Bilgisayar Mühendisliği', 'active']
            ];
            
            let csvContent = templateData.map(row => row.join(',')).join('\n');
            
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'ankader_uye_sablonu.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function processExcelFile() {
            const fileInput = document.getElementById('excelFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Lütfen bir dosya seçin!');
                return;
            }

            // Basit CSV parser (gerçek projede library kullanılmalı)
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const text = e.target.result;
                    const lines = text.split('\n');
                    const headers = lines[0].split(',').map(h => h.trim());
                    
                    let newMembers = [];
                    let errors = [];
                    
                    for (let i = 1; i < lines.length; i++) {
                        if (lines[i].trim()) {
                            const values = lines[i].split(',').map(v => v.trim());
                            
                            if (values.length >= 6) {
                                const newMember = {
                                    id: Math.max(...members.map(m => m.id), 0) + newMembers.length + 1,
                                    name: values[0],
                                    phone: values[1],
                                    email: values[2],
                                    graduationYear: parseInt(values[3]) || new Date().getFullYear(),
                                    university: values[4],
                                    department: values[5],
                                    status: values[6] || 'active',
                                    photo: 'assets/default-avatar.png',
                                    joinDate: new Date().toISOString().split('T')[0],
                                    customFields: {},
                                    notes: ''
                                };
                                
                                newMembers.push(newMember);
                            } else {
                                errors.push(`Satır ${i + 1}: Eksik veri`);
                            }
                        }
                    }
                    
                    if (newMembers.length > 0) {
                        members.push(...newMembers);
                        filteredMembers = [...members];
                        renderMembers();
                        updateDashboard();
                        populateFilters();
                        closeExcelModal();
                        alert(`${newMembers.length} üye başarıyla içe aktarıldı!${errors.length > 0 ? '\n\nHatalar:\n' + errors.join('\n') : ''}`);
                    } else {
                        alert('İçe aktarılacak geçerli üye bulunamadı!');
                    }
                } catch (error) {
                    alert('Dosya okunurken hata oluştu: ' + error.message);
                }
            };
            
            reader.readAsText(file, 'UTF-8');
        }

        // Bütçe İşlem Fonksiyonları
        function addTransaction() {
            editingTransactionId = null;
            document.getElementById('transactionModalTitle').textContent = 'Yeni İşlem Ekle';
            document.getElementById('transactionForm').reset();
            document.getElementById('transactionDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('transactionCategory').innerHTML = '<option value="">Önce işlem türünü seçin</option>';
            document.getElementById('transactionModal').style.display = 'block';
        }

        function editTransaction(id) {
            const transaction = transactions.find(t => t.id === id);
            if (transaction) {
                editingTransactionId = id;
                document.getElementById('transactionModalTitle').textContent = 'İşlem Düzenle';
                document.getElementById('transactionType').value = transaction.type;
                document.getElementById('transactionAmount').value = transaction.amount;
                document.getElementById('transactionDate').value = transaction.date;
                document.getElementById('transactionDescription').value = transaction.description;
                document.getElementById('transactionNotes').value = transaction.notes || '';
                
                // Kategori seçeneklerini güncelle ve seç
                updateCategoryOptions();
                document.getElementById('transactionCategory').value = transaction.category;
                
                document.getElementById('transactionModal').style.display = 'block';
            }
        }

        function deleteTransaction(id) {
            if (confirm('Bu işlemi silmek istediğinizden emin misiniz?')) {
                transactions = transactions.filter(t => t.id !== id);
                filteredTransactions = filteredTransactions.filter(t => t.id !== id);
                renderBudget();
                updateDashboard();
                alert('İşlem başarıyla silindi.');
            }
        }

        function saveTransaction() {
            const type = document.getElementById('transactionType').value;
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const date = document.getElementById('transactionDate').value;
            const category = document.getElementById('transactionCategory').value;
            const description = document.getElementById('transactionDescription').value;
            const notes = document.getElementById('transactionNotes').value;
            const memberId = document.getElementById('transactionMember').value;

            if (!type || !amount || !date || !category || !description) {
                alert('Lütfen zorunlu alanları doldurun!');
                return;
            }

            if (amount <= 0) {
                alert('Tutar 0\'dan büyük olmalıdır!');
                return;
            }

            const transactionData = {
                type, amount, date, category, description, notes,
                memberId: memberId || null,
                createdAt: new Date().toISOString()
            };

            if (editingTransactionId) {
                const index = transactions.findIndex(t => t.id === editingTransactionId);
                if (index !== -1) {
                    transactions[index] = { ...transactions[index], ...transactionData };
                }
            } else {
                transactionData.id = Math.max(...transactions.map(t => t.id), 0) + 1;
                transactions.push(transactionData);
            }

            // Üye performansını güncelle (aidat ve bağış için)
            if (memberId && type === 'income' && (category === 'dues' || category === 'donation')) {
                updateMemberPerformance(parseInt(memberId), category, amount, date);
            }

            filteredTransactions = [...transactions];
            renderBudget();
            updateDashboard();
            populateBudgetFilters();
            closeTransactionModal();
            alert(editingTransactionId ? 'İşlem başarıyla güncellendi.' : 'Yeni işlem başarıyla eklendi.');
        }

        function updateMemberPerformance(memberId, category, amount, date) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;

            // Aidat ödemesi için üye durumunu güncelle
            if (category === 'dues') {
                member.duesStatus = 'paid';
                member.lastDuesDate = date;
                
                // Yorum ekle
                const comment = {
                    id: Math.max(...memberComments.map(c => c.id), 0) + 1,
                    memberId: memberId,
                    text: `${amount}₺ aidat ödemesi alındı.`,
                    category: 'payment',
                    date: new Date().toISOString(),
                    author: currentUser?.name || 'Sistem'
                };
                memberComments.push(comment);
            }

            // Bağış için yorum ekle
            if (category === 'donation') {
                const comment = {
                    id: Math.max(...memberComments.map(c => c.id), 0) + 1,
                    memberId: memberId,
                    text: `${amount}₺ bağış yapıldı.`,
                    category: 'contribution',
                    date: new Date().toISOString(),
                    author: currentUser?.name || 'Sistem'
                };
                memberComments.push(comment);
            }
        }

        function closeTransactionModal() {
            document.getElementById('transactionModal').style.display = 'none';
            editingTransactionId = null;
        }

        function updateCategoryOptions() {
            const type = document.getElementById('transactionType').value;
            const categorySelect = document.getElementById('transactionCategory');
            const memberSelect = document.getElementById('transactionMember');
            
            const incomeCategories = [
                { value: 'dues', text: 'Aidat' },
                { value: 'donation', text: 'Bağış' },
                { value: 'event_income', text: 'Etkinlik Kazancı' },
                { value: 'other', text: 'Diğer' }
            ];
            
            const expenseCategories = [
                { value: 'office', text: 'Ofis Giderleri' },
                { value: 'event_expense', text: 'Etkinlik Giderleri' },
                { value: 'technology', text: 'Teknoloji' },
                { value: 'supplies', text: 'Malzemeler' },
                { value: 'travel', text: 'Seyahat' },
                { value: 'marketing', text: 'Pazarlama' },
                { value: 'other', text: 'Diğer' }
            ];
            
            categorySelect.innerHTML = '<option value="">Kategori Seçin</option>';
            
            if (type === 'income') {
                incomeCategories.forEach(cat => {
                    categorySelect.innerHTML += `<option value="${cat.value}">${cat.text}</option>`;
                });
            } else if (type === 'expense') {
                expenseCategories.forEach(cat => {
                    categorySelect.innerHTML += `<option value="${cat.value}">${cat.text}</option>`;
                });
            }
            
            // Üye listesini doldur
            memberSelect.innerHTML = '<option value="">Seçiniz (İsteğe bağlı)</option>';
            members.forEach(member => {
                memberSelect.innerHTML += `<option value="${member.id}">${member.name} - ${member.phone}</option>`;
            });
        }

        // Bütçe Filtreleme
        function populateBudgetFilters() {
            const categories = [...new Set(transactions.map(t => t.category))];
            const categoryFilter = document.getElementById('categoryFilter');
            categoryFilter.innerHTML = '<option value="">Tüm Kategoriler</option>';
            categories.forEach(cat => {
                categoryFilter.innerHTML += `<option value="${cat}">${getCategoryText(cat)}</option>`;
            });
        }

        function applyBudgetFilters() {
            const typeFilter = document.getElementById('typeFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const startDate = document.getElementById('budgetStartDate').value;
            const endDate = document.getElementById('budgetEndDate').value;

            filteredTransactions = transactions.filter(transaction => {
                const matchType = !typeFilter || transaction.type === typeFilter;
                const matchCategory = !categoryFilter || transaction.category === categoryFilter;
                const transactionDate = new Date(transaction.date);
                const matchStartDate = !startDate || transactionDate >= new Date(startDate);
                const matchEndDate = !endDate || transactionDate <= new Date(endDate);

                return matchType && matchCategory && matchStartDate && matchEndDate;
            });

            renderBudget();
        }

        function clearBudgetFilters() {
            document.getElementById('typeFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('budgetStartDate').value = '';
            document.getElementById('budgetEndDate').value = '';
            document.querySelector('#budgetPage .search-input').value = '';
            
            filteredTransactions = [...transactions];
            renderBudget();
        }

        function searchTransactions(query) {
            if (!query.trim()) {
                applyBudgetFilters();
                return;
            }

            const searchResults = filteredTransactions.filter(transaction => 
                transaction.description.toLowerCase().includes(query.toLowerCase()) ||
                getCategoryText(transaction.category).toLowerCase().includes(query.toLowerCase()) ||
                transaction.notes?.toLowerCase().includes(query.toLowerCase())
            );
            
            renderBudget(searchResults);
        }

        // Kararlar & Hedefler Fonksiyonları
        function addDecision() {
            editingDecisionId = null;
            document.getElementById('decisionModalTitle').textContent = 'Yeni Karar/Hedef Ekle';
            document.getElementById('decisionForm').reset();
            document.getElementById('decisionDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('decisionModal').style.display = 'block';
        }

        function editDecision(id) {
            const decision = decisions.find(d => d.id === id);
            if (decision) {
                editingDecisionId = id;
                document.getElementById('decisionModalTitle').textContent = 'Karar/Hedef Düzenle';
                document.getElementById('decisionType').value = decision.type;
                document.getElementById('decisionPriority').value = decision.priority;
                document.getElementById('decisionTitle').value = decision.title;
                document.getElementById('decisionDescription').value = decision.description;
                document.getElementById('decisionDate').value = decision.decisionDate || '';
                document.getElementById('decisionTargetDate').value = decision.targetDate || '';
                document.getElementById('decisionStatus').value = decision.status;
                document.getElementById('decisionResponsible').value = decision.responsible || '';
                document.getElementById('decisionNotes').value = decision.notes || '';
                document.getElementById('decisionModal').style.display = 'block';
            }
        }

        function deleteDecision(id) {
            if (confirm('Bu karar/hedefi silmek istediğinizden emin misiniz?')) {
                decisions = decisions.filter(d => d.id !== id);
                filteredDecisions = filteredDecisions.filter(d => d.id !== id);
                renderDecisions();
                alert('Karar/Hedef başarıyla silindi.');
            }
        }

        function saveDecision() {
            const type = document.getElementById('decisionType').value;
            const priority = document.getElementById('decisionPriority').value;
            const title = document.getElementById('decisionTitle').value;
            const description = document.getElementById('decisionDescription').value;
            const decisionDate = document.getElementById('decisionDate').value;
            const targetDate = document.getElementById('decisionTargetDate').value;
            const status = document.getElementById('decisionStatus').value;
            const responsible = document.getElementById('decisionResponsible').value;
            const notes = document.getElementById('decisionNotes').value;

            if (!type || !title || !description) {
                alert('Lütfen zorunlu alanları doldurun!');
                return;
            }

            const decisionData = {
                type, priority, title, description, decisionDate, targetDate, status, responsible, notes,
                createdAt: new Date().toISOString()
            };

            if (editingDecisionId) {
                const index = decisions.findIndex(d => d.id === editingDecisionId);
                if (index !== -1) {
                    decisions[index] = { ...decisions[index], ...decisionData };
                }
            } else {
                decisionData.id = Math.max(...decisions.map(d => d.id), 0) + 1;
                decisions.push(decisionData);
            }

            filteredDecisions = [...decisions];
            renderDecisions();
            closeDecisionModal();
            alert(editingDecisionId ? 'Karar/Hedef başarıyla güncellendi.' : 'Yeni karar/hedef başarıyla eklendi.');
        }

        function closeDecisionModal() {
            document.getElementById('decisionModal').style.display = 'none';
            editingDecisionId = null;
        }

        function renderDecisions(decisionsToRender = null) {
            const container = document.getElementById('decisionsContainer');
            const decisionsData = decisionsToRender || filteredDecisions;
            
            container.innerHTML = decisionsData.map(decision => {
                const typeIcon = decision.type === 'decision' ? 'fas fa-gavel' : decision.type === 'goal' ? 'fas fa-bullseye' : 'fas fa-tasks';
                const priorityColor = decision.priority === 'high' ? '#dc3545' : decision.priority === 'medium' ? '#ffc107' : '#28a745';
                const statusColor = getDecisionStatusColor(decision.status);
                
                return `
                    <div class="budget-card" style="border-left: 4px solid ${priorityColor};">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <i class="${typeIcon}" style="color: var(--ankader-orange); margin-right: 10px;"></i>
                                    <span style="font-weight: 600; color: var(--dark-text); font-size: 18px;">${decision.title}</span>
                                </div>
                                <div style="color: var(--gray); font-size: 14px; margin-bottom: 10px; line-height: 1.4;">
                                    ${decision.description}
                                </div>
                                <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 10px;">
                                    <span style="background: ${priorityColor}; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                        ${decision.priority === 'high' ? 'Yüksek' : decision.priority === 'medium' ? 'Orta' : 'Düşük'} Öncelik
                                    </span>
                                    <span style="background: ${statusColor}; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                        ${getDecisionStatusText(decision.status)}
                                    </span>
                                    <span style="background: var(--gray); color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px;">
                                        ${decision.type === 'decision' ? 'Karar' : decision.type === 'goal' ? 'Hedef' : 'Görev'}
                                    </span>
                                </div>
                                ${decision.responsible ? `
                                    <div style="color: var(--gray); font-size: 13px; margin-bottom: 5px;">
                                        <i class="fas fa-user"></i> Sorumlu: ${decision.responsible}
                                    </div>
                                ` : ''}
                                ${decision.targetDate ? `
                                    <div style="color: var(--gray); font-size: 13px; margin-bottom: 5px;">
                                        <i class="fas fa-calendar"></i> Hedef: ${new Date(decision.targetDate).toLocaleDateString('tr-TR')}
                                    </div>
                                ` : ''}
                                ${decision.decisionDate ? `
                                    <div style="color: var(--gray); font-size: 13px;">
                                        <i class="fas fa-calendar-check"></i> Karar: ${new Date(decision.decisionDate).toLocaleDateString('tr-TR')}
                                    </div>
                                ` : ''}
                            </div>
                            <div style="display: flex; gap: 5px; margin-left: 15px;">
                                <button class="btn-secondary" onclick="editDecision(${decision.id})" style="padding: 5px 10px; font-size: 12px;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-secondary" onclick="deleteDecision(${decision.id})" style="background: #dc3545; padding: 5px 10px; font-size: 12px;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getDecisionStatusText(status) {
            const statusMap = {
                'pending': 'Beklemede',
                'in_progress': 'Devam Ediyor',
                'completed': 'Tamamlandı',
                'cancelled': 'İptal Edildi'
            };
            return statusMap[status] || status;
        }

        function getDecisionStatusColor(status) {
            const colorMap = {
                'pending': '#ffc107',
                'in_progress': '#007bff',
                'completed': '#28a745',
                'cancelled': '#6c757d'
            };
            return colorMap[status] || '#6c757d';
        }

        function searchDecisions(query) {
            if (!query.trim()) {
                applyDecisionFilters();
                return;
            }

            const searchResults = filteredDecisions.filter(decision => 
                decision.title.toLowerCase().includes(query.toLowerCase()) ||
                decision.description.toLowerCase().includes(query.toLowerCase()) ||
                decision.responsible?.toLowerCase().includes(query.toLowerCase()) ||
                decision.notes?.toLowerCase().includes(query.toLowerCase())
            );
            
            renderDecisions(searchResults);
        }

        function applyDecisionFilters() {
            const typeFilter = document.getElementById('decisionTypeFilter').value;
            const statusFilter = document.getElementById('decisionStatusFilter').value;
            const priorityFilter = document.getElementById('decisionPriorityFilter').value;

            filteredDecisions = decisions.filter(decision => {
                const matchType = !typeFilter || decision.type === typeFilter;
                const matchStatus = !statusFilter || decision.status === statusFilter;
                const matchPriority = !priorityFilter || decision.priority === priorityFilter;

                return matchType && matchStatus && matchPriority;
            });

            renderDecisions();
        }

        function clearDecisionFilters() {
            document.getElementById('decisionTypeFilter').value = '';
            document.getElementById('decisionStatusFilter').value = '';
            document.getElementById('decisionPriorityFilter').value = '';
            document.querySelector('#decisionsPage .search-input').value = '';
            
            filteredDecisions = [...decisions];
            renderDecisions();
        }

        function exportDecisions() {
            if (filteredDecisions.length === 0) {
                alert('İndirilecek karar/hedef bulunmuyor!');
                return;
            }

            const headers = ['Tür', 'Öncelik', 'Başlık', 'Açıklama', 'Durum', 'Sorumlu', 'Karar Tarihi', 'Hedef Tarih'];
            const csvData = [headers];

            filteredDecisions.forEach(decision => {
                csvData.push([
                    decision.type === 'decision' ? 'Karar' : decision.type === 'goal' ? 'Hedef' : 'Görev',
                    decision.priority === 'high' ? 'Yüksek' : decision.priority === 'medium' ? 'Orta' : 'Düşük',
                    decision.title,
                    decision.description,
                    getDecisionStatusText(decision.status),
                    decision.responsible || '',
                    decision.decisionDate || '',
                    decision.targetDate || ''
                ]);
            });

            const csvContent = csvData.map(row => row.join(',')).join('\n');
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `ankader_kararlar_hedefler_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Üye Performans Fonksiyonları
        function renderPerformanceMembers(membersToRender = null) {
            const container = document.getElementById('performanceContainer');
            const membersData = membersToRender || filteredPerformance;
            
            container.innerHTML = membersData.map(member => {
                const performance = getCalculatedPerformance(member);
                
                return `
                    <div class="budget-card" style="border-left: 4px solid var(--ankader-orange); cursor: pointer;" onclick="viewMemberPerformance(${member.id})">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                    <div style="width: 50px; height: 50px; border-radius: 50%; background: var(--ankader-orange); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 15px;">
                                        ${member.name.charAt(0)}
                                    </div>
                                    <div>
                                        <div style="font-weight: 600; color: var(--dark-text); font-size: 18px;">${member.name}</div>
                                        <div style="color: var(--gray); font-size: 14px;">${member.phone} • ${member.email}</div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 10px;">
                                    <div style="background: ${member.duesStatus === 'paid' ? '#d4edda' : '#f8d7da'}; padding: 8px; border-radius: 6px; text-align: center;">
                                        <div style="font-size: 12px; color: var(--gray);">Aidat</div>
                                        <div style="font-weight: 600; color: ${member.duesStatus === 'paid' ? '#155724' : '#721c24'};">
                                            ${member.duesStatus === 'paid' ? 'Ödendi' : 'Ödenmedi'}
                                        </div>
                                    </div>
                                    <div style="background: #e2e3e5; padding: 8px; border-radius: 6px; text-align: center;">
                                        <div style="font-size: 12px; color: var(--gray);">Bağış</div>
                                        <div style="font-weight: 600;">${performance.totalDonation}₺</div>
                                    </div>
                                    <div style="background: #e2e3e5; padding: 8px; border-radius: 6px; text-align: center;">
                                        <div style="font-size: 12px; color: var(--gray);">Etkinlik</div>
                                        <div style="font-weight: 600;">${performance.eventParticipation} Katılım</div>
                                    </div>
                                </div>
                                
                                ${performance.lastComment ? `
                                    <div style="background: #f8f9fa; padding: 8px; border-radius: 6px; font-size: 13px; font-style: italic;">
                                        "${performance.lastComment}"
                                    </div>
                                ` : ''}
                            </div>
                            <div style="margin-left: 15px;">
                                <button class="btn-secondary" onclick="event.stopPropagation(); viewMemberPerformance(${member.id})" style="padding: 8px 12px; font-size: 12px;">
                                    <i class="fas fa-eye"></i> Detay
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getCalculatedPerformance(member) {
            const memberCommentsList = memberComments.filter(c => c.memberId === member.id);
            const memberTransactions = transactions.filter(t => t.memberId === member.id);
            const memberEvents = events.filter(e => e.participants && e.participants.includes(member.id));
            
            return {
                totalDonation: memberTransactions.reduce((sum, t) => sum + (t.amount || 0), 0),
                eventParticipation: memberEvents.length,
                commentCount: memberCommentsList.length,
                lastComment: memberCommentsList.length > 0 ? memberCommentsList[memberCommentsList.length - 1].text.substring(0, 50) + '...' : null
            };
        }

        function viewMemberPerformance(memberId) {
            const member = members.find(m => m.id === memberId);
            if (!member) return;
            
            selectedMemberId = memberId;
            const performance = getCalculatedPerformance(member);
            const memberCommentsList = memberComments.filter(c => c.memberId === memberId);
            const memberTransactions = transactions.filter(t => t.memberId === memberId);
            const memberEvents = events.filter(e => e.participants && e.participants.includes(memberId));
            
            document.getElementById('performanceModalTitle').textContent = `${member.name} - Performans Detayı`;
            document.getElementById('performanceModalContent').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Genel Bilgiler</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <div style="font-size: 14px; color: var(--gray);">Aidat Durumu</div>
                            <div style="font-weight: 600; color: ${member.duesStatus === 'paid' ? '#28a745' : '#dc3545'};">
                                ${member.duesStatus === 'paid' ? 'Ödendi' : 'Ödenmedi'}
                            </div>
                            ${member.lastDuesDate ? `<div style="font-size: 12px; color: var(--gray);">Son: ${new Date(member.lastDuesDate).toLocaleDateString('tr-TR')}</div>` : ''}
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <div style="font-size: 14px; color: var(--gray);">Toplam Bağış</div>
                            <div style="font-weight: 600; font-size: 18px;">${performance.totalDonation}₺</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <div style="font-size: 14px; color: var(--gray);">Etkinlik Katılımı</div>
                            <div style="font-weight: 600; font-size: 18px;">${performance.eventParticipation} Etkinlik</div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Bağış Geçmişi</h4>
                    <div style="max-height: 200px; overflow-y: auto;">
                        ${memberTransactions.length > 0 ? memberTransactions.map(t => `
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; margin-bottom: 5px; display: flex; justify-content: space-between;">
                                <span>${t.description || 'Bağış'}</span>
                                <span style="font-weight: 600;">${t.amount}₺</span>
                                <span style="color: var(--gray); font-size: 12px;">${new Date(t.date).toLocaleDateString('tr-TR')}</span>
                            </div>
                        `).join('') : '<p style="color: var(--gray); text-align: center;">Henüz bağış kaydı bulunmuyor.</p>'}
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Etkinlik Katılımları</h4>
                    <div style="max-height: 200px; overflow-y: auto;">
                        ${memberEvents.length > 0 ? memberEvents.map(e => `
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; margin-bottom: 5px;">
                                <div style="font-weight: 600;">${e.title}</div>
                                <div style="color: var(--gray); font-size: 12px;">${new Date(e.date).toLocaleDateString('tr-TR')} - ${e.location}</div>
                            </div>
                        `).join('') : '<p style="color: var(--gray); text-align: center;">Henüz etkinlik katılımı bulunmuyor.</p>'}
                    </div>
                </div>
                
                <div>
                    <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Yorumlar</h4>
                    <div id="memberCommentsList" style="max-height: 300px; overflow-y: auto;">
                        ${renderMemberComments(memberCommentsList)}
                    </div>
                </div>
            `;
            
            document.getElementById('performanceModal').style.display = 'block';
        }

        function renderMemberComments(comments) {
            if (comments.length === 0) {
                return '<p style="color: var(--gray); text-align: center;">Henüz yorum bulunmuyor.</p>';
            }
            
            return comments.map(comment => `
                <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid var(--ankader-orange);">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                        <span style="background: var(--ankader-orange); color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                            ${getCategoryText(comment.category)}
                        </span>
                        <span style="color: var(--gray); font-size: 12px;">
                            ${new Date(comment.date).toLocaleDateString('tr-TR')} ${new Date(comment.date).toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'})}
                        </span>
                    </div>
                    <div style="color: var(--dark-text);">${comment.text}</div>
                    <div style="color: var(--gray); font-size: 12px; margin-top: 5px;">
                        <i class="fas fa-user"></i> ${comment.author || 'Sistem'}
                    </div>
                </div>
            `).join('');
        }

        function getCategoryText(category) {
            const categoryMap = {
                'general': 'Genel',
                'payment': 'Ödeme',
                'event': 'Etkinlik',
                'behavior': 'Davranış',
                'contribution': 'Katkı'
            };
            return categoryMap[category] || category;
        }

        function addComment() {
            if (!selectedMemberId) return;
            document.getElementById('commentForm').reset();
            document.getElementById('commentModal').style.display = 'block';
        }

        function saveComment() {
            const text = document.getElementById('commentText').value;
            const category = document.getElementById('commentCategory').value;
            
            if (!text.trim()) {
                alert('Lütfen yorum yazın!');
                return;
            }
            
            const comment = {
                id: Math.max(...memberComments.map(c => c.id), 0) + 1,
                memberId: selectedMemberId,
                text: text.trim(),
                category: category,
                date: new Date().toISOString(),
                author: currentUser?.name || 'Sistem'
            };
            
            memberComments.push(comment);
            
            // Modal içeriğini güncelle
            const memberCommentsList = memberComments.filter(c => c.memberId === selectedMemberId);
            document.getElementById('memberCommentsList').innerHTML = renderMemberComments(memberCommentsList);
            
            closeCommentModal();
            alert('Yorum başarıyla eklendi!');
        }

        function closePerformanceModal() {
            document.getElementById('performanceModal').style.display = 'none';
            selectedMemberId = null;
        }

        function closeCommentModal() {
            document.getElementById('commentModal').style.display = 'none';
        }

        // İstatistik Fonksiyonları
        function showStatistics() {
            populateStatisticsFilters();
            updateStatistics();
            document.getElementById('statisticsModal').style.display = 'block';
        }

        function populateStatisticsFilters() {
            const categories = [...new Set(transactions.map(t => t.category))];
            const categoryFilter = document.getElementById('statsCategory');
            categoryFilter.innerHTML = '<option value="">Tüm Kategoriler</option>';
            categories.forEach(cat => {
                categoryFilter.innerHTML += `<option value="${cat}">${getCategoryText(cat)}</option>`;
            });

            // Varsayılan tarih aralığı (son 30 gün)
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - 30);
            
            document.getElementById('statsStartDate').value = startDate.toISOString().split('T')[0];
            document.getElementById('statsEndDate').value = endDate.toISOString().split('T')[0];
        }

        function updateStatistics() {
            const startDate = document.getElementById('statsStartDate').value;
            const endDate = document.getElementById('statsEndDate').value;
            const category = document.getElementById('statsCategory').value;

            let filteredData = transactions;

            // Tarih filtrelemesi
            if (startDate) {
                filteredData = filteredData.filter(t => t.date >= startDate);
            }
            if (endDate) {
                filteredData = filteredData.filter(t => t.date <= endDate);
            }
            
            // Kategori filtrelemesi
            if (category) {
                filteredData = filteredData.filter(t => t.category === category);
            }

            renderStatistics(filteredData);
        }

        function renderStatistics(data) {
            const income = data.filter(t => t.type === 'income');
            const expense = data.filter(t => t.type === 'expense');

            const totalIncome = income.reduce((sum, t) => sum + t.amount, 0);
            const totalExpense = expense.reduce((sum, t) => sum + t.amount, 0);
            const balance = totalIncome - totalExpense;

            // Kategori bazında analiz
            const incomeByCategory = {};
            const expenseByCategory = {};

            income.forEach(t => {
                incomeByCategory[t.category] = (incomeByCategory[t.category] || 0) + t.amount;
            });

            expense.forEach(t => {
                expenseByCategory[t.category] = (expenseByCategory[t.category] || 0) + t.amount;
            });

            document.getElementById('statisticsContent').innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <h4 style="margin: 0 0 10px 0;">Toplam Gelir</h4>
                        <div style="font-size: 24px; font-weight: bold;">${totalIncome.toLocaleString('tr-TR')}₺</div>
                        <div style="font-size: 14px; opacity: 0.9;">${income.length} işlem</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #dc3545, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <h4 style="margin: 0 0 10px 0;">Toplam Gider</h4>
                        <div style="font-size: 24px; font-weight: bold;">${totalExpense.toLocaleString('tr-TR')}₺</div>
                        <div style="font-size: 14px; opacity: 0.9;">${expense.length} işlem</div>
                    </div>
                    <div style="background: linear-gradient(135deg, ${balance >= 0 ? '#007bff, #6610f2' : '#6f42c1, #e83e8c'}); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <h4 style="margin: 0 0 10px 0;">Net Bakiye</h4>
                        <div style="font-size: 24px; font-weight: bold;">${balance.toLocaleString('tr-TR')}₺</div>
                        <div style="font-size: 14px; opacity: 0.9;">${balance >= 0 ? 'Pozitif' : 'Negatif'}</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Gelir Kategorileri</h4>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            ${Object.keys(incomeByCategory).length > 0 ? 
                                Object.entries(incomeByCategory).map(([cat, amount]) => `
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #dee2e6;">
                                        <span>${getCategoryText(cat)}</span>
                                        <span style="font-weight: 600; color: #28a745;">${amount.toLocaleString('tr-TR')}₺</span>
                                    </div>
                                `).join('') : 
                                '<p style="color: var(--gray); text-align: center;">Gelir kaydı bulunmuyor</p>'
                            }
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Gider Kategorileri</h4>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            ${Object.keys(expenseByCategory).length > 0 ? 
                                Object.entries(expenseByCategory).map(([cat, amount]) => `
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #dee2e6;">
                                        <span>${getCategoryText(cat)}</span>
                                        <span style="font-weight: 600; color: #dc3545;">${amount.toLocaleString('tr-TR')}₺</span>
                                    </div>
                                `).join('') : 
                                '<p style="color: var(--gray); text-align: center;">Gider kaydı bulunmuyor</p>'
                            }
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h4 style="color: var(--ankader-orange); margin-bottom: 15px;">Son İşlemler</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; max-height: 300px; overflow-y: auto;">
                        ${data.slice(-10).reverse().map(t => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #dee2e6; background: white; margin-bottom: 5px; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 600;">${t.description}</div>
                                    <div style="font-size: 12px; color: var(--gray);">${getCategoryText(t.category)} • ${new Date(t.date).toLocaleDateString('tr-TR')}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: ${t.type === 'income' ? '#28a745' : '#dc3545'};">
                                        ${t.type === 'income' ? '+' : '-'}${t.amount.toLocaleString('tr-TR')}₺
                                    </div>
                                    ${t.memberId ? `<div style="font-size: 12px; color: var(--gray);">${members.find(m => m.id == t.memberId)?.name || 'Üye'}</div>` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function clearStatisticsFilters() {
            document.getElementById('statsStartDate').value = '';
            document.getElementById('statsEndDate').value = '';
            document.getElementById('statsCategory').value = '';
            updateStatistics();
        }

        function closeStatisticsModal() {
            document.getElementById('statisticsModal').style.display = 'none';
        }

        function exportStatistics() {
            const startDate = document.getElementById('statsStartDate').value;
            const endDate = document.getElementById('statsEndDate').value;
            const category = document.getElementById('statsCategory').value;

            let filteredData = transactions;

            if (startDate) filteredData = filteredData.filter(t => t.date >= startDate);
            if (endDate) filteredData = filteredData.filter(t => t.date <= endDate);
            if (category) filteredData = filteredData.filter(t => t.category === category);

            const ws = XLSX.utils.json_to_sheet(filteredData.map(t => ({
                'Tarih': new Date(t.date).toLocaleDateString('tr-TR'),
                'Tür': t.type === 'income' ? 'Gelir' : 'Gider',
                'Kategori': getCategoryText(t.category),
                'Açıklama': t.description,
                'Tutar': t.amount,
                'Kişi/Kurum': t.memberId ? members.find(m => m.id == t.memberId)?.name || '' : '',
                'Notlar': t.notes || ''
            })));

            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "İstatistikler");
            XLSX.writeFile(wb, `istatistik_${new Date().toLocaleDateString('tr-TR').replace(/\./g, '_')}.xlsx`);
        }

        function searchPerformanceMembers(query) {
            if (!query.trim()) {
                applyPerformanceFilters();
                return;
            }

            const searchResults = filteredPerformance.filter(member => 
                member.name.toLowerCase().includes(query.toLowerCase()) ||
                member.phone.includes(query) ||
                member.email.toLowerCase().includes(query.toLowerCase())
            );
            
            renderPerformanceMembers(searchResults);
        }

        function applyPerformanceFilters() {
            const duesFilter = document.getElementById('performanceDuesFilter').value;
            const donationFilter = document.getElementById('donationFilter').value;
            const eventFilter = document.getElementById('eventParticipationFilter').value;

            filteredPerformance = memberPerformance.filter(member => {
                const performance = getCalculatedPerformance(member);
                const matchDues = !duesFilter || (member.duesStatus || 'unpaid') === duesFilter;
                
                let matchDonation = true;
                if (donationFilter === 'donor') matchDonation = performance.totalDonation > 0;
                if (donationFilter === 'non_donor') matchDonation = performance.totalDonation === 0;
                
                let matchEvent = true;
                if (eventFilter === 'active_participant') matchEvent = performance.eventParticipation >= 3;
                if (eventFilter === 'low_participant') matchEvent = performance.eventParticipation >= 1 && performance.eventParticipation < 3;
                if (eventFilter === 'no_participant') matchEvent = performance.eventParticipation === 0;

                return matchDues && matchDonation && matchEvent;
            });

            renderPerformanceMembers();
        }

        function clearPerformanceFilters() {
            document.getElementById('performanceDuesFilter').value = '';
            document.getElementById('donationFilter').value = '';
            document.getElementById('eventParticipationFilter').value = '';
            document.querySelector('#performancePage .search-input').value = '';
            
            filteredPerformance = [...memberPerformance];
            renderPerformanceMembers();
        }

        // Admin Yönetimi Fonksiyonları
        function showAdminPanel() {
            showPage('adminPanel');
        }

        function renderAdmins() {
            const container = document.getElementById('adminContainer');
            
            if (filteredAdmins.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: var(--gray);">
                        <i class="fas fa-user-shield" style="font-size: 48px; margin-bottom: 20px;"></i>
                        <h3>Henüz alt yönetici eklenmemiş</h3>
                        <p>Yeni yönetici eklemek için "Yeni Yönetici Ekle" butonunu kullanın.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filteredAdmins.map(admin => `
                <div class="budget-card" style="border-left: 4px solid ${getRoleColor(admin.role)};">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; border-radius: 50%; background: ${getRoleColor(admin.role)}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 15px;">
                                    ${admin.member.name.charAt(0)}
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--dark-text); font-size: 18px;">${admin.member.name}</div>
                                    <div style="color: var(--gray); font-size: 14px;">${admin.member.phone} • ${admin.member.email}</div>
                                    <div style="color: ${getRoleColor(admin.role)}; font-size: 12px; font-weight: 600; text-transform: uppercase;">
                                        ${getRoleText(admin.role)}
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <div style="font-size: 14px; color: var(--gray); margin-bottom: 8px;">Erişim İzinleri:</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    ${admin.permissions.map(perm => `
                                        <span style="background: var(--ankader-orange); color: white; padding: 4px 8px; border-radius: 12px; font-size: 11px;">
                                            ${getPermissionText(perm)}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div style="font-size: 12px; color: var(--gray);">
                                <i class="fas fa-calendar"></i> Eklendi: ${new Date(admin.createdAt).toLocaleDateString('tr-TR')}
                                ${admin.lastLogin ? `• Son giriş: ${new Date(admin.lastLogin).toLocaleDateString('tr-TR')}` : '• Henüz giriş yapmadı'}
                            </div>
                            
                            ${admin.notes ? `
                                <div style="background: #f8f9fa; padding: 8px; border-radius: 6px; margin-top: 10px; font-size: 13px; font-style: italic;">
                                    "${admin.notes}"
                                </div>
                            ` : ''}
                        </div>
                        
                        <div style="margin-left: 15px; display: flex; flex-direction: column; gap: 8px;">
                            <button class="btn-secondary" onclick="editAdmin(${admin.id})" style="padding: 6px 12px; font-size: 12px;">
                                <i class="fas fa-edit"></i> Düzenle
                            </button>
                            <button class="btn-danger" onclick="deleteAdmin(${admin.id})" style="padding: 6px 12px; font-size: 12px; background: #dc3545; color: white; border: none;">
                                <i class="fas fa-trash"></i> Sil
                            </button>
                            <button class="btn-secondary" onclick="resetAdminPassword(${admin.id})" style="padding: 6px 12px; font-size: 12px;">
                                <i class="fas fa-key"></i> Şifre
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getRoleColor(role) {
            const colors = {
                'admin': '#dc3545',
                'moderator': '#fd7e14', 
                'viewer': '#6c757d'
            };
            return colors[role] || '#6c757d';
        }

        function getRoleText(role) {
            const roles = {
                'admin': 'Yönetici',
                'moderator': 'Moderatör',
                'viewer': 'Görüntüleyici'
            };
            return roles[role] || role;
        }

        function getPermissionText(permission) {
            const permissions = {
                'members': 'Üyeler',
                'events': 'Etkinlikler',
                'budget': 'Bütçe',
                'decisions': 'Kararlar',
                'performance': 'Performans',
                'reports': 'Raporlar'
            };
            return permissions[permission] || permission;
        }

        function addAdmin() {
            editingAdminId = null;
            document.getElementById('adminModalTitle').textContent = 'Yeni Yönetici Ekle';
            document.getElementById('adminForm').reset();
            
            // Üye listesini doldur
            const memberSelect = document.getElementById('adminMember');
            memberSelect.innerHTML = '<option value="">Üye seçiniz</option>';
            
            // Zaten yönetici olmayan üyeleri göster
            const adminMemberIds = admins.map(a => a.member.id);
            const availableMembers = members.filter(m => !adminMemberIds.includes(m.id));
            
            availableMembers.forEach(member => {
                memberSelect.innerHTML += `<option value="${member.id}">${member.name} - ${member.phone}</option>`;
            });
            
            document.getElementById('adminModal').style.display = 'block';
        }

        function editAdmin(adminId) {
            const admin = admins.find(a => a.id === adminId);
            if (!admin) return;
            
            editingAdminId = adminId;
            document.getElementById('adminModalTitle').textContent = 'Yönetici Düzenle';
            
            // Üye listesini doldur (mevcut yöneticiyi de dahil et)
            const memberSelect = document.getElementById('adminMember');
            memberSelect.innerHTML = '<option value="">Üye seçiniz</option>';
            
            const adminMemberIds = admins.filter(a => a.id !== adminId).map(a => a.member.id);
            const availableMembers = members.filter(m => !adminMemberIds.includes(m.id));
            
            availableMembers.forEach(member => {
                const selected = member.id === admin.member.id ? 'selected' : '';
                memberSelect.innerHTML += `<option value="${member.id}" ${selected}>${member.name} - ${member.phone}</option>`;
            });
            
            document.getElementById('adminRole').value = admin.role;
            document.getElementById('adminNotes').value = admin.notes || '';
            
            // İzinleri işaretle
            admin.permissions.forEach(perm => {
                const checkbox = document.getElementById(`perm_${perm}`);
                if (checkbox) checkbox.checked = true;
            });
            
            document.getElementById('adminModal').style.display = 'block';
        }

        function saveAdmin() {
            const memberId = parseInt(document.getElementById('adminMember').value);
            const role = document.getElementById('adminRole').value;
            const password = document.getElementById('adminPassword').value;
            const passwordConfirm = document.getElementById('adminPasswordConfirm').value;
            const notes = document.getElementById('adminNotes').value;

            if (!memberId || !role || !password) {
                alert('Lütfen zorunlu alanları doldurun!');
                return;
            }

            if (password !== passwordConfirm) {
                alert('Şifreler eşleşmiyor!');
                return;
            }

            if (password.length < 6) {
                alert('Şifre en az 6 karakter olmalıdır!');
                return;
            }

            const member = members.find(m => m.id === memberId);
            if (!member) {
                alert('Seçilen üye bulunamadı!');
                return;
            }

            // İzinleri topla
            const permissions = [];
            ['members', 'events', 'budget', 'decisions', 'performance', 'reports'].forEach(perm => {
                const checkbox = document.getElementById(`perm_${perm}`);
                if (checkbox && checkbox.checked) {
                    permissions.push(perm);
                }
            });

            const adminData = {
                member,
                role,
                password,
                permissions,
                notes: notes.trim(),
                createdAt: new Date().toISOString(),
                lastLogin: null
            };

            if (editingAdminId) {
                const index = admins.findIndex(a => a.id === editingAdminId);
                if (index !== -1) {
                    const oldRole = admins[index].role;
                    admins[index] = { ...admins[index], ...adminData };
                    
                    // Rol değiştiyse bildirim gönder
                    if (oldRole !== role) {
                        sendRoleChangeNotification(member, role, password, false);
                    }
                }
            } else {
                adminData.id = Math.max(...admins.map(a => a.id), 0) + 1;
                admins.push(adminData);
                
                // Yeni yetkili için bildirim gönder
                sendRoleChangeNotification(member, role, password, true);
            }

            filteredAdmins = [...admins];
            renderAdmins();
            closeAdminModal();
            alert(editingAdminId ? 'Yönetici başarıyla güncellendi.' : 'Yeni yönetici başarıyla eklendi.');
        }

        function sendRoleChangeNotification(member, role, password, isNew = true) {
            const roleTexts = {
                'main_admin': 'Ana Yönetici',
                'admin': 'Yönetici',
                'moderator': 'Moderatör',
                'viewer': 'Görüntüleyici'
            };
            
            const roleText = roleTexts[role] || role;
            const actionText = isNew ? 'görevlendirildiniz' : 'yetkiniz güncellendi';
            
            const message = `ANKADER Yönetim Sistemi

Sayın ${member.name},

ANKADER yönetim panelinde ${roleText} yetkisiyle ${actionText}.

Giriş Bilgileriniz:
• Telefon: ${member.phone}
• Şifre: ${password}

Yetki Detayları:
${getRolePermissions(role)}

Giriş: ${window.location.href}

ANKADER Yönetim`;

            // WhatsApp ve SMS simülasyonu
            simulateAdminNotification(member.phone, message);
        }

        function getRolePermissions(role) {
            const permissions = {
                'main_admin': '• Tüm sisteme tam erişim\n• Ana yönetici yetkileri\n• Sistem yönetimi',
                'admin': '• Üye yönetimi\n• Etkinlik yönetimi\n• Bütçe yönetimi\n• Yönetici paneli',
                'moderator': '• Üye yönetimi\n• Etkinlik yönetimi\n• Bütçe görüntüleme',
                'viewer': '• Sadece görüntüleme\n• Rapor indirme\n• İstatistik görüntüleme'
            };
            return permissions[role] || 'Özel yetkiler';
        }

        function simulateAdminNotification(phone, message) {
            // Gerçek uygulamada SMS/WhatsApp API çağrısı yapılacak
            console.log('Admin Bildirimi Gönderildi:', {
                phone: phone,
                message: message,
                timestamp: new Date().toISOString()
            });
            
            // Kullanıcıya bilgi ver
            setTimeout(() => {
                if (confirm(`${phone} numarasına yetkilendirme mesajı gönderilsin mi?\n\n"${message.substring(0, 150)}..."`)) {
                    alert(`Yetkilendirme mesajı ${phone} numarasına başarıyla gönderildi!`);
                }
            }, 500);
        }

        function deleteAdmin(adminId) {
            const admin = admins.find(a => a.id === adminId);
            if (!admin) return;
            
            if (confirm(`${admin.member.name} isimli yöneticiyi silmek istediğinizden emin misiniz?`)) {
                admins = admins.filter(a => a.id !== adminId);
                filteredAdmins = [...admins];
                renderAdmins();
                alert('Yönetici başarıyla silindi.');
            }
        }

        function resetAdminPassword(adminId) {
            const admin = admins.find(a => a.id === adminId);
            if (!admin) return;
            
            const newPassword = prompt(`${admin.member.name} için yeni şifre girin:`);
            if (newPassword && newPassword.length >= 6) {
                admin.password = newPassword;
                alert('Şifre başarıyla güncellendi.');
            } else if (newPassword) {
                alert('Şifre en az 6 karakter olmalıdır!');
            }
        }

        function closeAdminModal() {
            document.getElementById('adminModal').style.display = 'none';
            editingAdminId = null;
        }

        function searchAdmins(query) {
            if (!query.trim()) {
                filteredAdmins = [...admins];
            } else {
                filteredAdmins = admins.filter(admin =>
                    admin.member.name.toLowerCase().includes(query.toLowerCase()) ||
                    admin.member.phone.includes(query) ||
                    admin.member.email.toLowerCase().includes(query.toLowerCase()) ||
                    getRoleText(admin.role).toLowerCase().includes(query.toLowerCase())
                );
            }
            renderAdmins();
        }

        // Mesaj Gönderme Fonksiyonları
        function initializeMessaging() {
            populateMessageFilters();
            updateRecipientOptions();
            updateRecipientCount();
            
            // Karakter sayacı
            document.getElementById('messageContent').addEventListener('input', function() {
                const charCount = this.value.length;
                document.getElementById('charCount').textContent = charCount;
                if (charCount > 500) {
                    this.value = this.value.substring(0, 500);
                    document.getElementById('charCount').textContent = 500;
                }
            });
            
            // Zamanlanmış gönderim
            document.getElementById('sendTime').addEventListener('change', function() {
                const scheduledGroup = document.getElementById('scheduledTimeGroup');
                scheduledGroup.style.display = this.value === 'scheduled' ? 'block' : 'none';
            });
        }

        function populateMessageFilters() {
            // Mezuniyet yılları
            const gradYears = [...new Set(members.map(m => m.graduationYear))].sort();
            const gradYearSelect = document.getElementById('messageGradYearFilter');
            gradYearSelect.innerHTML = '<option value="">Tüm Yıllar</option>';
            gradYears.forEach(year => {
                gradYearSelect.innerHTML += `<option value="${year}">${year}</option>`;
            });

            // Bölümler
            const departments = [...new Set(members.map(m => m.department))];
            const deptSelect = document.getElementById('messageDepartmentFilter');
            deptSelect.innerHTML = '<option value="">Tüm Bölümler</option>';
            departments.forEach(dept => {
                deptSelect.innerHTML += `<option value="${dept}">${dept}</option>`;
            });
        }

        function updateRecipientOptions() {
            const type = document.getElementById('recipientType').value;
            const filterOptions = document.getElementById('filterOptions');
            const selectedMembers = document.getElementById('selectedMembers');
            
            filterOptions.style.display = type === 'filtered' ? 'block' : 'none';
            selectedMembers.style.display = type === 'selected' ? 'block' : 'none';
            
            if (type === 'selected') {
                populateMemberCheckboxes();
            }
            
            updateRecipientCount();
        }

        function populateMemberCheckboxes() {
            const container = document.getElementById('memberCheckboxList');
            container.innerHTML = members.map(member => `
                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 5px; border-radius: 4px; hover: background-color: #f8f9fa;">
                    <input type="checkbox" value="${member.id}" onchange="updateRecipientCount()">
                    <span>${member.name} - ${member.phone}</span>
                </label>
            `).join('');
        }

        function updateRecipientCount() {
            const type = document.getElementById('recipientType').value;
            let recipients = [];
            let details = '';
            
            if (type === 'all') {
                recipients = members;
                details = 'Tüm üyeler dahil';
            } else if (type === 'filtered') {
                recipients = getFilteredMembers();
                details = 'Filtre kriterleri uygulandı';
            } else if (type === 'selected') {
                const checkboxes = document.querySelectorAll('#memberCheckboxList input[type="checkbox"]:checked');
                recipients = Array.from(checkboxes).map(cb => members.find(m => m.id == cb.value));
                details = 'Manuel seçim yapıldı';
            }
            
            document.getElementById('recipientCount').textContent = recipients.length;
            document.getElementById('recipientDetails').textContent = details;
        }

        function getFilteredMembers() {
            const gradYear = document.getElementById('messageGradYearFilter').value;
            const department = document.getElementById('messageDepartmentFilter').value;
            const duesStatus = document.getElementById('messageDuesFilter').value;
            
            return members.filter(member => {
                const matchGrad = !gradYear || member.graduationYear == gradYear;
                const matchDept = !department || member.department === department;
                const matchDues = !duesStatus || (member.duesStatus || 'unpaid') === duesStatus;
                
                return matchGrad && matchDept && matchDues;
            });
        }

        function sendMessage() {
            const messageType = document.getElementById('messageType').value;
            const content = document.getElementById('messageContent').value;
            const sendTime = document.getElementById('sendTime').value;
            const scheduledDateTime = document.getElementById('scheduledDateTime').value;
            
            if (!messageType || !content.trim()) {
                alert('Lütfen mesaj türü ve içeriğini girin!');
                return;
            }
            
            if (sendTime === 'scheduled' && !scheduledDateTime) {
                alert('Lütfen gönderim tarihini seçin!');
                return;
            }
            
            const recipientType = document.getElementById('recipientType').value;
            let recipients = [];
            
            if (recipientType === 'all') {
                recipients = members;
            } else if (recipientType === 'filtered') {
                recipients = getFilteredMembers();
            } else if (recipientType === 'selected') {
                const checkboxes = document.querySelectorAll('#memberCheckboxList input[type="checkbox"]:checked');
                recipients = Array.from(checkboxes).map(cb => members.find(m => m.id == cb.value));
            }
            
            if (recipients.length === 0) {
                alert('Mesaj gönderilecek alıcı bulunamadı!');
                return;
            }
            
            // Simülasyon - Gerçek uygulamada API çağrısı yapılacak
            const messageTypeText = messageType === 'whatsapp' ? 'WhatsApp' : 'SMS';
            const timeText = sendTime === 'now' ? 'hemen' : `${new Date(scheduledDateTime).toLocaleString('tr-TR')} tarihinde`;
            
            if (confirm(`${recipients.length} kişiye ${messageTypeText} mesajı ${timeText} gönderilsin mi?`)) {
                // Mesaj gönderim simülasyonu
                simulateMessageSending(recipients, messageType, content, sendTime, scheduledDateTime);
            }
        }

        function simulateMessageSending(recipients, type, content, sendTime, scheduledDateTime) {
            const messageTypeText = type === 'whatsapp' ? 'WhatsApp' : 'SMS';
            
            // Loading göster
            const originalText = event.target.textContent;
            event.target.textContent = 'Gönderiliyor...';
            event.target.disabled = true;
            
            setTimeout(() => {
                alert(`${recipients.length} kişiye ${messageTypeText} mesajı başarıyla ${sendTime === 'now' ? 'gönderildi' : 'zamanlandı'}!`);
                
                // Formu temizle
                clearMessageForm();
                
                // Button'u eski haline getir
                event.target.textContent = originalText;
                event.target.disabled = false;
            }, 2000);
        }

        function clearMessageForm() {
            document.getElementById('messageType').value = '';
            document.getElementById('messageContent').value = '';
            document.getElementById('sendTime').value = 'now';
            document.getElementById('scheduledDateTime').value = '';
            document.getElementById('recipientType').value = 'all';
            document.getElementById('scheduledTimeGroup').style.display = 'none';
            document.getElementById('filterOptions').style.display = 'none';
            document.getElementById('selectedMembers').style.display = 'none';
            document.getElementById('charCount').textContent = '0';
            updateRecipientCount();
        }

        // Yönetim Kadrosu Fonksiyonları
        function renderManagement() {
            const container = document.getElementById('managementContainer');
            
            if (filteredManagement.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: var(--gray);">
                        <i class="fas fa-users-cog" style="font-size: 48px; margin-bottom: 20px;"></i>
                        <h3>Henüz yönetim kadrosu eklenmemiş</h3>
                        <p>Yeni kadro eklemek için "Yeni Kadro Ekle" butonunu kullanın.</p>
                    </div>
                `;
                return;
            }

            // Öncelik sırasına göre sırala
            const sortedManagement = [...filteredManagement].sort((a, b) => a.priority - b.priority);

            container.innerHTML = sortedManagement.map(mgmt => `
                <div class="budget-card" style="border-left: 4px solid ${getPriorityColor(mgmt.priority)};">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: ${getPriorityColor(mgmt.priority)}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 20px; font-size: 18px;">
                                    ${mgmt.member.name.charAt(0)}
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--dark-text); font-size: 20px;">${mgmt.member.name}</div>
                                    <div style="color: ${getPriorityColor(mgmt.priority)}; font-size: 16px; font-weight: 600; margin: 5px 0;">
                                        ${mgmt.title}
                                    </div>
                                    <div style="color: var(--gray); font-size: 14px;">${mgmt.member.phone} • ${mgmt.member.email}</div>
                                </div>
                            </div>
                            
                            ${mgmt.description ? `
                                <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
                                    <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">Görev Tanımı:</div>
                                    <div style="font-size: 14px; line-height: 1.4;">${mgmt.description}</div>
                                </div>
                            ` : ''}
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px;">
                                ${mgmt.startDate ? `
                                    <div style="background: #e8f5e8; padding: 8px; border-radius: 6px; text-align: center;">
                                        <div style="font-size: 12px; color: var(--gray);">Görev Başlangıcı</div>
                                        <div style="font-weight: 600; color: #155724;">${new Date(mgmt.startDate).toLocaleDateString('tr-TR')}</div>
                                    </div>
                                ` : ''}
                                ${mgmt.endDate ? `
                                    <div style="background: #fff3cd; padding: 8px; border-radius: 6px; text-align: center;">
                                        <div style="font-size: 12px; color: var(--gray);">Görev Bitişi</div>
                                        <div style="font-weight: 600; color: #856404;">${new Date(mgmt.endDate).toLocaleDateString('tr-TR')}</div>
                                    </div>
                                ` : ''}
                                <div style="background: #e2e3e5; padding: 8px; border-radius: 6px; text-align: center;">
                                    <div style="font-size: 12px; color: var(--gray);">Öncelik</div>
                                    <div style="font-weight: 600;">${getPriorityText(mgmt.priority)}</div>
                                </div>
                            </div>
                            
                            ${mgmt.contact ? `
                                <div style="background: #d1ecf1; padding: 10px; border-radius: 6px; margin-bottom: 10px;">
                                    <div style="font-size: 12px; color: var(--gray); margin-bottom: 5px;">İletişim:</div>
                                    <div style="font-size: 13px; color: #0c5460;">${mgmt.contact}</div>
                                </div>
                            ` : ''}
                            
                            ${mgmt.notes ? `
                                <div style="background: #f8f9fa; padding: 8px; border-radius: 6px; font-size: 13px; font-style: italic;">
                                    "${mgmt.notes}"
                                </div>
                            ` : ''}
                        </div>
                        
                        <div style="margin-left: 15px; display: flex; flex-direction: column; gap: 8px;">
                            <button class="btn-secondary" onclick="editManagementMember(${mgmt.id})" style="padding: 6px 12px; font-size: 12px;">
                                <i class="fas fa-edit"></i> Düzenle
                            </button>
                            <button class="btn-danger" onclick="deleteManagementMember(${mgmt.id})" style="padding: 6px 12px; font-size: 12px; background: #dc3545; color: white; border: none;">
                                <i class="fas fa-trash"></i> Sil
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getPriorityColor(priority) {
            const colors = {
                1: '#dc3545', // Kırmızı - En yüksek
                2: '#fd7e14', // Turuncu - Yüksek  
                3: '#ffc107', // Sarı - Orta
                4: '#28a745', // Yeşil - Normal
                5: '#6c757d'  // Gri - Düşük
            };
            return colors[priority] || '#6c757d';
        }

        function getPriorityText(priority) {
            const texts = {
                1: '1 - En Yüksek',
                2: '2 - Yüksek',
                3: '3 - Orta', 
                4: '4 - Normal',
                5: '5 - Düşük'
            };
            return texts[priority] || priority;
        }

        function addManagementMember() {
            editingManagementId = null;
            document.getElementById('managementModalTitle').textContent = 'Yeni Kadro Ekle';
            document.getElementById('managementForm').reset();
            
            // Üye listesini doldur
            const memberSelect = document.getElementById('managementMember');
            memberSelect.innerHTML = '<option value="">Üye seçiniz</option>';
            
            members.forEach(member => {
                memberSelect.innerHTML += `<option value="${member.id}">${member.name} - ${member.phone}</option>`;
            });
            
            document.getElementById('managementModal').style.display = 'block';
        }

        function editManagementMember(mgmtId) {
            const mgmt = managementTeam.find(m => m.id === mgmtId);
            if (!mgmt) return;
            
            editingManagementId = mgmtId;
            document.getElementById('managementModalTitle').textContent = 'Kadro Düzenle';
            
            // Üye listesini doldur
            const memberSelect = document.getElementById('managementMember');
            memberSelect.innerHTML = '<option value="">Üye seçiniz</option>';
            
            members.forEach(member => {
                const selected = member.id === mgmt.member.id ? 'selected' : '';
                memberSelect.innerHTML += `<option value="${member.id}" ${selected}>${member.name} - ${member.phone}</option>`;
            });
            
            document.getElementById('managementTitle').value = mgmt.title;
            document.getElementById('managementDescription').value = mgmt.description || '';
            document.getElementById('managementStartDate').value = mgmt.startDate || '';
            document.getElementById('managementEndDate').value = mgmt.endDate || '';
            document.getElementById('managementPriority').value = mgmt.priority || '4';
            document.getElementById('managementContact').value = mgmt.contact || '';
            document.getElementById('managementNotes').value = mgmt.notes || '';
            
            document.getElementById('managementModal').style.display = 'block';
        }

        function saveManagementMember() {
            const memberId = parseInt(document.getElementById('managementMember').value);
            const title = document.getElementById('managementTitle').value;
            const description = document.getElementById('managementDescription').value;
            const startDate = document.getElementById('managementStartDate').value;
            const endDate = document.getElementById('managementEndDate').value;
            const priority = parseInt(document.getElementById('managementPriority').value) || 4;
            const contact = document.getElementById('managementContact').value;
            const notes = document.getElementById('managementNotes').value;

            if (!memberId || !title.trim()) {
                alert('Lütfen üye ve görev unvanı seçin!');
                return;
            }

            const member = members.find(m => m.id === memberId);
            if (!member) {
                alert('Seçilen üye bulunamadı!');
                return;
            }

            const mgmtData = {
                member,
                title: title.trim(),
                description: description.trim(),
                startDate: startDate || null,
                endDate: endDate || null,
                priority,
                contact: contact.trim(),
                notes: notes.trim(),
                createdAt: new Date().toISOString()
            };

            if (editingManagementId) {
                const index = managementTeam.findIndex(m => m.id === editingManagementId);
                if (index !== -1) {
                    managementTeam[index] = { ...managementTeam[index], ...mgmtData };
                }
            } else {
                mgmtData.id = Math.max(...managementTeam.map(m => m.id), 0) + 1;
                managementTeam.push(mgmtData);
            }

            filteredManagement = [...managementTeam];
            renderManagement();
            closeManagementModal();
            alert(editingManagementId ? 'Kadro başarıyla güncellendi.' : 'Yeni kadro başarıyla eklendi.');
        }

        function deleteManagementMember(mgmtId) {
            const mgmt = managementTeam.find(m => m.id === mgmtId);
            if (!mgmt) return;
            
            if (confirm(`${mgmt.member.name} - ${mgmt.title} kadrosunu silmek istediğinizden emin misiniz?`)) {
                managementTeam = managementTeam.filter(m => m.id !== mgmtId);
                filteredManagement = [...managementTeam];
                renderManagement();
                alert('Kadro başarıyla silindi.');
            }
        }

        function closeManagementModal() {
            document.getElementById('managementModal').style.display = 'none';
            editingManagementId = null;
        }

        function searchManagement(query) {
            if (!query.trim()) {
                filteredManagement = [...managementTeam];
            } else {
                filteredManagement = managementTeam.filter(mgmt =>
                    mgmt.member.name.toLowerCase().includes(query.toLowerCase()) ||
                    mgmt.title.toLowerCase().includes(query.toLowerCase()) ||
                    mgmt.member.phone.includes(query) ||
                    mgmt.member.email.toLowerCase().includes(query.toLowerCase())
                );
            }
            renderManagement();
        }

        function exportMembers() {
            if (filteredMembers.length === 0) {
                alert('İndirilecek üye bulunmuyor!');
                return;
            }

            const headers = ['Ad Soyad', 'Telefon', 'Email', 'Mezuniyet Yılı', 'Üniversite', 'Bölüm', 'Durum', 'Katılım Tarihi'];
            const data = [headers];

            filteredMembers.forEach(member => {
                data.push([
                    member.name,
                    member.phone,
                    member.email,
                    member.graduationYear,
                    member.university,
                    member.department,
                    member.status === 'active' ? 'Aktif' : 'Pasif',
                    member.joinDate
                ]);
            });

            // Excel dosyası oluştur
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Sütun genişliklerini ayarla
            ws['!cols'] = [
                { width: 20 }, // Ad Soyad
                { width: 15 }, // Telefon
                { width: 25 }, // Email
                { width: 12 }, // Mezuniyet Yılı
                { width: 20 }, // Üniversite
                { width: 20 }, // Bölüm
                { width: 10 }, // Durum
                { width: 15 }  // Katılım Tarihi
            ];
            
            XLSX.utils.book_append_sheet(wb, ws, 'Üyeler');
            XLSX.writeFile(wb, `ankader_uyeler_${new Date().toISOString().split('T')[0]}.xlsx`);
        }

        function exportMembersPDF() {
            if (filteredMembers.length === 0) {
                alert('İndirilecek üye bulunmuyor!');
                return;
            }

            try {
                // jsPDF kontrolü
                if (typeof window.jspdf === 'undefined') {
                    alert('PDF kütüphanesi yüklenemedi. Lütfen sayfayı yenileyin.');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });

                // Başlık
                doc.setFontSize(16);
                doc.setFont('helvetica', 'bold');
                doc.text('ANKADER - Uye Listesi', 20, 20);
                
                doc.setFontSize(10);
                doc.setFont('helvetica', 'normal');
                doc.text(`Tarih: ${new Date().toLocaleDateString('tr-TR')}`, 20, 30);
                doc.text(`Toplam Uye: ${filteredMembers.length}`, 20, 35);

                // Tablo verileri
                const headers = [['Ad Soyad', 'Telefon', 'Email', 'Mezuniyet Yili', 'Universite', 'Bolum', 'Durum']];
                const data = filteredMembers.map(member => [
                    turkishToEnglish(member.name || ''),
                    member.phone || '',
                    member.email || '',
                    member.graduationYear || '',
                    turkishToEnglish(member.university || ''),
                    turkishToEnglish(member.department || ''),
                    member.status === 'active' ? 'Aktif' : 'Pasif'
                ]);

                // AutoTable kontrolü
                if (typeof doc.autoTable === 'function') {
                    doc.autoTable({
                        head: headers,
                        body: data,
                        startY: 45,
                        styles: {
                            fontSize: 8,
                            cellPadding: 2,
                            font: 'helvetica'
                        },
                        headStyles: {
                            fillColor: [255, 127, 0],
                            textColor: 255,
                            fontStyle: 'bold'
                        },
                        alternateRowStyles: {
                            fillColor: [245, 245, 245]
                        }
                    });
                } else {
                    // AutoTable yoksa basit metin olarak yaz
                    let yPosition = 50;
                    data.forEach(row => {
                        doc.text(row.join(' | '), 20, yPosition);
                        yPosition += 5;
                    });
                }

                doc.save(`ankader_uyeler_${new Date().toISOString().split('T')[0]}.pdf`);
                
            } catch (error) {
                console.error('PDF oluşturma hatası:', error);
                alert('PDF oluşturulurken bir hata oluştu: ' + error.message);
            }
        }

        function exportEvents() {
            if (filteredEvents.length === 0) {
                alert('İndirilecek etkinlik bulunmuyor!');
                return;
            }

            const headers = ['Başlık', 'Tarih', 'Saat', 'Konum', 'Açıklama', 'Durum', 'Katılımcı Sayısı'];
            const data = [headers];

            filteredEvents.forEach(event => {
                data.push([
                    event.title,
                    event.date,
                    event.time,
                    event.location,
                    event.description,
                    getEventStatusText(event.status),
                    event.participants ? event.participants.length : 0
                ]);
            });

            // Excel dosyası oluştur
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Sütun genişliklerini ayarla
            ws['!cols'] = [
                { width: 25 }, // Başlık
                { width: 12 }, // Tarih
                { width: 10 }, // Saat
                { width: 20 }, // Konum
                { width: 30 }, // Açıklama
                { width: 12 }, // Durum
                { width: 15 }  // Katılımcı Sayısı
            ];
            
            XLSX.utils.book_append_sheet(wb, ws, 'Etkinlikler');
            XLSX.writeFile(wb, `ankader_etkinlikler_${new Date().toISOString().split('T')[0]}.xlsx`);
        }

        function exportEventsPDF() {
            if (filteredEvents.length === 0) {
                alert('İndirilecek etkinlik bulunmuyor!');
                return;
            }

            try {
                if (typeof window.jspdf === 'undefined') {
                    alert('PDF kütüphanesi yüklenemedi. Lütfen sayfayı yenileyin.');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });

                // Başlık
                doc.setFontSize(16);
                doc.setFont('helvetica', 'bold');
                doc.text('ANKADER - Etkinlik Listesi', 20, 20);
                
                doc.setFontSize(10);
                doc.setFont('helvetica', 'normal');
                doc.text(`Tarih: ${new Date().toLocaleDateString('tr-TR')}`, 20, 30);
                doc.text(`Toplam Etkinlik: ${filteredEvents.length}`, 20, 35);

                // Tablo verileri
                const headers = [['Baslik', 'Tarih', 'Saat', 'Konum', 'Durum', 'Katilimci']];
                const data = filteredEvents.map(event => [
                    turkishToEnglish(event.title || ''),
                    new Date(event.date).toLocaleDateString('tr-TR'),
                    event.time || '',
                    turkishToEnglish(event.location || ''),
                    turkishToEnglish(getEventStatusText(event.status) || ''),
                    event.participants ? event.participants.length : 0
                ]);

                if (typeof doc.autoTable === 'function') {
                    doc.autoTable({
                        head: headers,
                        body: data,
                        startY: 45,
                        styles: {
                            fontSize: 9,
                            cellPadding: 3,
                            font: 'helvetica'
                        },
                        headStyles: {
                            fillColor: [255, 127, 0],
                            textColor: 255,
                            fontStyle: 'bold'
                        },
                        alternateRowStyles: {
                            fillColor: [245, 245, 245]
                        }
                    });
                } else {
                    let yPosition = 50;
                    data.forEach(row => {
                        doc.text(row.join(' | '), 20, yPosition);
                        yPosition += 5;
                    });
                }

                doc.save(`ankader_etkinlikler_${new Date().toISOString().split('T')[0]}.pdf`);
                
            } catch (error) {
                console.error('PDF oluşturma hatası:', error);
                alert('PDF oluşturulurken bir hata oluştu: ' + error.message);
            }
        }

        function exportBudget() {
            if (transactions.length === 0) {
                alert('İndirilecek işlem bulunmuyor!');
                return;
            }

            const headers = ['Tarih', 'Açıklama', 'Kategori', 'Tür', 'Tutar', 'Üye'];
            const data = [headers];

            transactions.forEach(transaction => {
                const member = transaction.memberId ? members.find(m => m.id === transaction.memberId) : null;
                data.push([
                    transaction.date,
                    transaction.description,
                    transaction.category || '-',
                    transaction.type === 'income' ? 'Gelir' : 'Gider',
                    transaction.amount + '₺',
                    member ? member.name : '-'
                ]);
            });

            // Excel dosyası oluştur
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Sütun genişliklerini ayarla
            ws['!cols'] = [
                { width: 12 }, // Tarih
                { width: 25 }, // Açıklama
                { width: 15 }, // Kategori
                { width: 10 }, // Tür
                { width: 12 }, // Tutar
                { width: 20 }  // Üye
            ];
            
            XLSX.utils.book_append_sheet(wb, ws, 'Bütçe');
            XLSX.writeFile(wb, `ankader_butce_${new Date().toISOString().split('T')[0]}.xlsx`);
        }

        function exportBudgetPDF() {
            if (transactions.length === 0) {
                alert('İndirilecek işlem bulunmuyor!');
                return;
            }

            try {
                if (typeof window.jspdf === 'undefined') {
                    alert('PDF kütüphanesi yüklenemedi. Lütfen sayfayı yenileyin.');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });

                // Başlık
                doc.setFontSize(16);
                doc.setFont('helvetica', 'bold');
                doc.text('ANKADER - Butce Raporu', 20, 20);
                
                doc.setFontSize(10);
                doc.setFont('helvetica', 'normal');
                doc.text(`Tarih: ${new Date().toLocaleDateString('tr-TR')}`, 20, 30);

                // Özet bilgiler
                const totalIncome = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
                const totalExpense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
                const balance = totalIncome - totalExpense;

                doc.text(`Toplam Gelir: ${totalIncome.toLocaleString('tr-TR')} TL`, 20, 40);
                doc.text(`Toplam Gider: ${totalExpense.toLocaleString('tr-TR')} TL`, 150, 40);
                doc.text(`Net Bakiye: ${balance.toLocaleString('tr-TR')} TL`, 20, 50);

                // Tablo verileri
                const headers = [['Tarih', 'Aciklama', 'Kategori', 'Tur', 'Tutar', 'Uye']];
                const data = transactions.map(transaction => {
                    const member = transaction.memberId ? members.find(m => m.id === transaction.memberId) : null;
                    return [
                        new Date(transaction.date).toLocaleDateString('tr-TR'),
                        turkishToEnglish(transaction.description || ''),
                        turkishToEnglish(transaction.category || '-'),
                        transaction.type === 'income' ? 'Gelir' : 'Gider',
                        transaction.amount.toLocaleString('tr-TR') + ' TL',
                        member ? turkishToEnglish(member.name || '') : '-'
                    ];
                });

                if (typeof doc.autoTable === 'function') {
                    doc.autoTable({
                        head: headers,
                        body: data,
                        startY: 60,
                        styles: {
                            fontSize: 8,
                            cellPadding: 2,
                            font: 'helvetica'
                        },
                        headStyles: {
                            fillColor: [255, 127, 0],
                            textColor: 255,
                            fontStyle: 'bold'
                        },
                        alternateRowStyles: {
                            fillColor: [245, 245, 245]
                        }
                    });
                } else {
                    let yPosition = 65;
                    data.forEach(row => {
                        doc.text(row.join(' | '), 20, yPosition);
                        yPosition += 5;
                    });
                }

                doc.save(`ankader_butce_${new Date().toISOString().split('T')[0]}.pdf`);
                
            } catch (error) {
                console.error('PDF oluşturma hatası:', error);
                alert('PDF oluşturulurken bir hata oluştu: ' + error.message);
            }
        }

        // Modal kapatma (dışarı tıklayınca)
        window.onclick = function(event) {
            const memberModal = document.getElementById('memberModal');
            const eventModal = document.getElementById('eventModal');
            const excelModal = document.getElementById('excelModal');
            const transactionModal = document.getElementById('transactionModal');
            const decisionModal = document.getElementById('decisionModal');
            const statisticsModal = document.getElementById('statisticsModal');
            const adminModal = document.getElementById('adminModal');
            
            if (event.target === memberModal) {
                closeMemberModal();
            } else if (event.target === eventModal) {
                closeEventModal();
            } else if (event.target === excelModal) {
                closeExcelModal();
            } else if (event.target === transactionModal) {
                closeTransactionModal();
            } else if (event.target === decisionModal) {
                closeDecisionModal();
            } else if (event.target === statisticsModal) {
                closeStatisticsModal();
            } else if (event.target === adminModal) {
                closeAdminModal();
            }
        }

        // Türkçe karakterleri İngilizce karakterlere çeviren fonksiyon
        function turkishToEnglish(text) {
            if (!text) return text;
            
            const turkishChars = {
                'ç': 'c', 'Ç': 'C',
                'ğ': 'g', 'Ğ': 'G',
                'ı': 'i', 'I': 'I',
                'İ': 'I', 'i': 'i',
                'ö': 'o', 'Ö': 'O',
                'ş': 's', 'Ş': 'S',
                'ü': 'u', 'Ü': 'U'
            };
            
            return text.split('').map(char => turkishChars[char] || char).join('');
        }
    </script>
</body>
</html>
